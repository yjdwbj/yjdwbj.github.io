<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="fpgarduino talking-to-the-de0-nano-using-the-virtual-jtag-interface Altera_Design_Software  OpenRISC OpenRISC Linux FuseSoC FuseSoC standard core library Getting started with OpenRISC on Altera Teras">
<meta name="keywords" content="FPGA,RISC-V,Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="玩转FPGA_DE0-Nano">
<meta property="og:url" content="http://yoursite.com/2021/02/02/玩转FPGA-DE0-Nano/index.html">
<meta property="og:site_name" content="Sunrise 博客">
<meta property="og:description" content="fpgarduino talking-to-the-de0-nano-using-the-virtual-jtag-interface Altera_Design_Software  OpenRISC OpenRISC Linux FuseSoC FuseSoC standard core library Getting started with OpenRISC on Altera Teras">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/imgs/mm_reward_qrcode_1525013906055.png">
<meta property="og:updated_time" content="2021-11-29T13:19:09.030Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="玩转FPGA_DE0-Nano">
<meta name="twitter:description" content="fpgarduino talking-to-the-de0-nano-using-the-virtual-jtag-interface Altera_Design_Software  OpenRISC OpenRISC Linux FuseSoC FuseSoC standard core library Getting started with OpenRISC on Altera Teras">
<meta name="twitter:image" content="http://yoursite.com/imgs/mm_reward_qrcode_1525013906055.png">

<link rel="canonical" href="http://yoursite.com/2021/02/02/玩转FPGA-DE0-Nano/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>玩转FPGA_DE0-Nano | Sunrise 博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Sunrise 博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/02/02/玩转FPGA-DE0-Nano/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/321919?s=400&u=67298bd9fc3b622eaf93a6cc511a24ac878e86db&v=4">
      <meta itemprop="name" content="yjdwbj">
      <meta itemprop="description" content="最是人间留不住,朱颜辞镜花辞树">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sunrise 博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          玩转FPGA_DE0-Nano
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-02 19:01:27" itemprop="dateCreated datePublished" datetime="2021-02-02T19:01:27+08:00">2021-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-29 21:19:09" itemprop="dateModified" datetime="2021-11-29T21:19:09+08:00">2021-11-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <ul>
<li><a href="http://www.nxlab.fer.hr/fpgarduino/" target="_blank" rel="noopener">fpgarduino</a></li>
<li><a href="https://idlelogiclabs.com/2012/04/15/talking-to-the-de0-nano-using-the-virtual-jtag-interface/" target="_blank" rel="noopener">talking-to-the-de0-nano-using-the-virtual-jtag-interface</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Altera_Design_Software" target="_blank" rel="noopener">Altera_Design_Software</a></li>
</ul>
<h1 id="OpenRISC"><a href="#OpenRISC" class="headerlink" title="OpenRISC"></a>OpenRISC</h1><ul>
<li><a href="https://www.kernel.org/doc/html/latest/openrisc/openrisc_port.html" target="_blank" rel="noopener">OpenRISC Linux</a></li>
<li><a href="https://github.com/olofk/fusesoc" target="_blank" rel="noopener">FuseSoC</a></li>
<li><a href="https://github.com/fusesoc/fusesoc-cores" target="_blank" rel="noopener">FuseSoC standard core library</a></li>
<li><a href="https://matbaj.github.io/2015/01/19/openrisc-on-de2-115/" target="_blank" rel="noopener">Getting started with OpenRISC on Altera Terasic de2-115 board</a></li>
<li><a href="https://kevinmehall.net/openrisc/guide/" target="_blank" rel="noopener">Getting Started with OpenRISC</a></li>
</ul>
<h2 id="管脚定义"><a href="#管脚定义" class="headerlink" title="管脚定义"></a>管脚定义</h2><ul>
<li>下面数据来源于<code>DE0_Nano_User_Manual.pdf</code>的<code>Chapter 3-3.5 Expansion headers</code>.</li>
</ul>
<h3 id="GPIO-0-Pin-Assignments"><a href="#GPIO-0-Pin-Assignments" class="headerlink" title="GPIO-0 Pin Assignments"></a>GPIO-0 Pin Assignments</h3><table>
<thead>
<tr>
<th>Signal Name</th>
<th>FPGA Pin No.</th>
<th>Descritption</th>
<th>I/O Standard</th>
</tr>
</thead>
<tbody>
<tr>
<td>GPIO_0_IN0</td>
<td>PIN_A8</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_00</td>
<td>PIN_D3</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_0_IN1</td>
<td>PIN_B8</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_01</td>
<td>PIN_C3</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_02</td>
<td>PIN_A2</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_03</td>
<td>PIN_A3</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_04</td>
<td>PIN_B3</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_05</td>
<td>PIN_B4</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_06</td>
<td>PIN_A4</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_07</td>
<td>PIN_B5</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_08</td>
<td>PIN_A5</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_09</td>
<td>PIN_D5</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_010</td>
<td>PIN_B6</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_011</td>
<td>PIN_A6</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_012</td>
<td>PIN_B7</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_013</td>
<td>PIN_D6</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_014</td>
<td>PIN_A7</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_015</td>
<td>PIN_C6</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_016</td>
<td>PIN_C8</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_017</td>
<td>PIN_E6</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_018</td>
<td>PIN_E7</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_019</td>
<td>PIN_D8</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_020</td>
<td>PIN_E8</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_021</td>
<td>PIN_F8</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_022</td>
<td>PIN_F9</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_023</td>
<td>PIN_E9</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_024</td>
<td>PIN_C9</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_025</td>
<td>PIN_D9</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_026</td>
<td>PIN_E11</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_027</td>
<td>PIN_E10</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_028</td>
<td>PIN_C11</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_029</td>
<td>PIN_B11</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_030</td>
<td>PIN_A12</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_031</td>
<td>PIN_D11</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_032</td>
<td>PIN_D12</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_033</td>
<td>PIN_B12</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
</tbody>
</table>
<h3 id="GPIO-1-Pin-Assignments"><a href="#GPIO-1-Pin-Assignments" class="headerlink" title="GPIO-1 Pin Assignments"></a>GPIO-1 Pin Assignments</h3><table>
<thead>
<tr>
<th>Signal Name</th>
<th>FPGA Pin No.</th>
<th>Descritption</th>
<th>I/O Standard</th>
</tr>
</thead>
<tbody>
<tr>
<td>GPIO_1_IN0</td>
<td>PIN_T9</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_10</td>
<td>PIN_F13</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_1_IN1</td>
<td>PIN_R9</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_11</td>
<td>PIN_T15</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_12</td>
<td>PIN_T14</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_13</td>
<td>PIN_T13</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_14</td>
<td>PIN_R13</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_15</td>
<td>PIN_T12</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_16</td>
<td>PIN_R12</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_17</td>
<td>PIN_T11</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_18</td>
<td>PIN_T10</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_19</td>
<td>PIN_R11</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_110</td>
<td>PIN_P11</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_111</td>
<td>PIN_R10</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_112</td>
<td>PIN_N12</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_113</td>
<td>PIN_P9</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_114</td>
<td>PIN_N9</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_115</td>
<td>PIN_N11</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_116</td>
<td>PIN_L16</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_117</td>
<td>PIN_K16</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_118</td>
<td>PIN_R16</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_119</td>
<td>PIN_L15</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_120</td>
<td>PIN_P15</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_121</td>
<td>PIN_P16</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_122</td>
<td>PIN_R14</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_123</td>
<td>PIN_N16</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_124</td>
<td>PIN_N15</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_125</td>
<td>PIN_P14</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_126</td>
<td>PIN_L14</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_127</td>
<td>PIN_N14</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_128</td>
<td>PIN_M10</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_129</td>
<td>PIN_L13</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_130</td>
<td>PIN_J16</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_131</td>
<td>PIN_K15</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_132</td>
<td>PIN_J13</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_133</td>
<td>PIN_J14</td>
<td>GPIO Connection DATA</td>
<td>3.3V</td>
</tr>
</tbody>
</table>
<h3 id="Table-3-8-Pin-Assignments-for-2x13-Header"><a href="#Table-3-8-Pin-Assignments-for-2x13-Header" class="headerlink" title="Table 3-8 Pin Assignments for 2x13 Header"></a>Table 3-8 Pin Assignments for 2x13 Header</h3><table>
<thead>
<tr>
<th>Signal Name</th>
<th>FPGA Pin No.</th>
<th>Descritption</th>
<th>I/O Standard</th>
</tr>
</thead>
<tbody>
<tr>
<td>GPIO_2[0]</td>
<td>PIN_A14</td>
<td>GPIO Connection DATA[0]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[1]</td>
<td>PIN_B16</td>
<td>GPIO Connection DATA[1]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[2]</td>
<td>PIN_C14</td>
<td>GPIO Connection DATA[2]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[3]</td>
<td>PIN_C16</td>
<td>GPIO Connection DATA[3]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[4]</td>
<td>PIN_C15</td>
<td>GPIO Connection DATA[4]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[5]</td>
<td>PIN_D16</td>
<td>GPIO Connection DATA[5]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[6]</td>
<td>PIN_D15</td>
<td>GPIO Connection DATA[6]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[7]</td>
<td>PIN_D14</td>
<td>GPIO Connection DATA[7]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[8]</td>
<td>PIN_F15</td>
<td>GPIO Connection DATA[8]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[9]</td>
<td>PIN_F16</td>
<td>GPIO Connection DATA[9]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[10]</td>
<td>PIN_F14</td>
<td>GPIO Connection DATA[10]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[11]</td>
<td>PIN_G16</td>
<td>GPIO Connection DATA[11]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2[12]</td>
<td>PIN_G15</td>
<td>GPIO Connection DATA[12]</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2_IN[0]</td>
<td>PIN_E15</td>
<td>GPIO Input</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2_IN[1]</td>
<td>PIN_E16</td>
<td>GPIO Input</td>
<td>3.3V</td>
</tr>
<tr>
<td>GPIO_2_IN[2]</td>
<td>PIN_M16</td>
<td>GPIO Input</td>
<td>3.3V</td>
</tr>
</tbody>
</table>
<h3 id="Table-3-9-Pin-Assignments-for-ADC"><a href="#Table-3-9-Pin-Assignments-for-ADC" class="headerlink" title="Table 3-9 Pin Assignments for ADC"></a>Table 3-9 Pin Assignments for ADC</h3><table>
<thead>
<tr>
<th>Signal Name</th>
<th>FPGA Pin No.</th>
<th>Descritption</th>
<th>I/O Standard</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADC_CS_N</td>
<td>PIN_A10</td>
<td>Chip select</td>
<td>3.3V</td>
</tr>
<tr>
<td>ADC_SADDR</td>
<td>PIN_B10</td>
<td>Digital data input</td>
<td>3.3V</td>
</tr>
<tr>
<td>ADC_SDAT</td>
<td>PIN_A9</td>
<td>Digital data output</td>
<td>3.3V</td>
</tr>
<tr>
<td>ADC_SCLK</td>
<td>PIN_B14</td>
<td>Digital clock input</td>
<td>3.3V</td>
</tr>
</tbody>
</table>
<h2 id="GCC工具链"><a href="#GCC工具链" class="headerlink" title="GCC工具链"></a>GCC工具链</h2><ul>
<li><a href="https://github.com/stffrdhrn/or1k-toolchain-build" target="_blank" rel="noopener">or1k-toolchain-build</a></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~$ git <span class="built_in">clone</span> https://github.com/stffrdhrn/or1k-toolchain-build</span><br><span class="line">~$ <span class="built_in">cd</span> or1k-toolchain-build</span><br><span class="line">~$ docker build -t or1k-toolchain-build or1k-toolchain-build/</span><br></pre></td></tr></table></figure>
<ul>
<li>设置挂载目录变量，运行容器编译。如果<code>build-gcc.sh</code>内的资源链接失效了，需要找一个替代修改它，如：<br><code>QEMU_URL=https://github.com/vamanea/qemu-or32/archive/v2.0.2.tar.gz</code>。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The location where you have tarballs, so they dont need to be</span></span><br><span class="line"><span class="comment"># downloaded every time you build</span></span><br><span class="line">CACHEDIR=/home/user/work/docker/volumes/src</span><br><span class="line"><span class="comment"># The location where you want your output to go</span></span><br><span class="line">OUTPUTDIR=/home/user/work/docker/volumes/crosstool</span><br><span class="line"></span><br><span class="line">docker run -it --rm \</span><br><span class="line">  -e MUSL_ENABLED=1 \</span><br><span class="line">  -e NEWLIB_ENABLED=1 \</span><br><span class="line">  -e NOLIB_ENABLED=1 \</span><br><span class="line">  -e GCC_VERSION=9.0.1 \</span><br><span class="line">  -e BINUTILS_VERSION=2.32.51 \</span><br><span class="line">  -e LINUX_HEADERS_VERSION=4.19.1 \</span><br><span class="line">  -e MUSL_VERSION=1.1.20 \</span><br><span class="line">  -e GMP_VERSION=6.1.2 \</span><br><span class="line">  -v <span class="variable">$&#123;OUTPUTDIR&#125;</span>:/opt/crosstool:Z \</span><br><span class="line">  -v <span class="variable">$&#123;CACHEDIR&#125;</span>:/opt/crossbuild/cache:Z \</span><br><span class="line">    or1k-toolchain-build</span><br></pre></td></tr></table></figure>
<p>$</p>
<ul>
<li>编译成功后，如下：</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br><span class="line">or1k-elf-9.0.1-20210204.tar.xz</span><br><span class="line">or1k-elf-gcc-9.0.1-20210204.log.gz</span><br><span class="line">or1k-elf-gcc-9.0.1-20210204.sum</span><br><span class="line">or1k-elf-gxx-9.0.1-20210204.log.gz</span><br><span class="line">or1k-elf-gxx-9.0.1-20210204.sum</span><br><span class="line">or1k-linux-9.0.1-20210204.tar.xz</span><br><span class="line">or1k-linux-musl-9.0.1-20210204.tar.xz</span><br><span class="line">or1k-linux-musl-gcc-9.0.1-20210203.log.gz</span><br><span class="line">or1k-linux-musl-gcc-9.0.1-20210203.sum</span><br><span class="line">or1k-linux-musl-gcc-9.0.1-20210204.log.gz</span><br><span class="line">or1k-linux-musl-gcc-9.0.1-20210204.sum</span><br><span class="line">or1k-linux-musl-gxx-9.0.1-20210203.log.gz</span><br><span class="line">or1k-linux-musl-gxx-9.0.1-20210203.sum</span><br><span class="line">or1k-linux-musl-gxx-9.0.1-20210204.log.gz</span><br><span class="line">or1k-linux-musl-gxx-9.0.1-20210204.sum</span><br><span class="line">relnotes-9.0.1-20210204.md</span><br></pre></td></tr></table></figure>
<ul>
<li>这里把<code>or1k-linux-9.0.1-20210204.tar.xz</code>解压安装到本地，并设置相应的环境变量如下：</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ALTERA_PATH=<span class="string">"/home/michael/3TB-DISK/intelFPGA_lite/20.1/"</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$ALTERA_PATH</span>/quartus/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ARCH=openrisc</span><br><span class="line"><span class="built_in">export</span> CROSS_COMPILE=or1k-linux-</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:`<span class="built_in">pwd</span>`/toolchain-rootfs/or1k-linux/bin</span><br></pre></td></tr></table></figure>
<ul>
<li>或者单独编译<code>or1k-gcc</code></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~$ git <span class="built_in">clone</span> https://github.com/openrisc/or1k-gcc</span><br><span class="line">~$ <span class="built_in">cd</span> or1k-gcc/</span><br><span class="line">~$ mkdir build-linux</span><br><span class="line">~$ <span class="built_in">cd</span> build-linux &amp;&amp; ../configure &amp;&amp; make -j4</span><br><span class="line">~$ make install DESTPATH=&lt;absolute  path&gt;</span><br></pre></td></tr></table></figure>
<h2 id="编译ORPSOC"><a href="#编译ORPSOC" class="headerlink" title="编译ORPSOC"></a>编译<code>ORPSOC</code></h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~$ git <span class="built_in">clone</span> https://github.com/mczerski/orpsoc-de0_nano</span><br><span class="line">~$ <span class="built_in">export</span> ALTERA_PATH=<span class="string">"/home/fullpath/QuartusIIWebEdition13.0.0.156/quartus"</span></span><br><span class="line">~$ <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$ALTERA_PATH</span>/bin</span><br><span class="line">~$ make OR32_TOOL_PREFIX=or1k-linux- all</span><br></pre></td></tr></table></figure>
<h2 id="编译Linux"><a href="#编译Linux" class="headerlink" title="编译Linux"></a>编译Linux</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">~$ tar xvf linux-4.16.14.tar.xz</span><br><span class="line">~$ <span class="built_in">cd</span> linux-4.16.14</span><br><span class="line">~$ wget -c https://kevinmehall.net/openrisc/guide/de0_nano.dts.txt -O arch/openrisc/boot/dts/de0_nano.dts</span><br><span class="line"></span><br><span class="line">~$ make ARCH=openrisc CROSS_COMPILE=<span class="string">"or1k-linux-"</span> or1ksim_defconfig</span><br><span class="line">/** Select Processor <span class="built_in">type</span> and Features -&gt; Builtin DTB and <span class="built_in">type</span> de0_nano */</span><br><span class="line">~$ make ARCH=openrisc CROSS_COMPILE=<span class="string">"or1k-linux-"</span> menuconfig</span><br><span class="line">~$ make ARCH=openrisc CROSS_COMPILE=<span class="string">"or1k-linux-"</span></span><br></pre></td></tr></table></figure>
<h2 id="烧写入bitstream"><a href="#烧写入bitstream" class="headerlink" title="烧写入bitstream"></a>烧写入bitstream</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~$ <span class="built_in">cd</span> orpsoc/boards/altera/de0_nano/syn/quartus/run</span><br><span class="line">~$ make OR32_TOOL_PREFIX=or1k-linux- all</span><br><span class="line">~$ make pgm</span><br></pre></td></tr></table></figure>
<h2 id="连接串号"><a href="#连接串号" class="headerlink" title="连接串号"></a>连接串号</h2><ul>
<li>根据上面<code>GPIO</code>的管脚定义，以及下面的信息，连接正确的<code>rx,tx</code>.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat boards/altera/de0_nano/syn/quartus/tcl/UART0_pin_assignments.tcl</span><br><span class="line">set_location_assignment PIN_D8 -to uart0_srx_pad_i</span><br><span class="line">set_instance_assignment -name IO_STANDARD <span class="string">"3.3-V LVTTL"</span> -to uart0_srx_pad_i</span><br><span class="line">set_location_assignment PIN_F8 -to uart0_stx_pad_o</span><br><span class="line">set_instance_assignment -name IO_STANDARD <span class="string">"3.3-V LVTTL"</span> -to uart0_stx_pad_o</span><br></pre></td></tr></table></figure>
<h1 id="FuseSOC-试用"><a href="#FuseSOC-试用" class="headerlink" title="FuseSOC 试用"></a>FuseSOC 试用</h1><ul>
<li><a href="https://fusesoc.readthedocs.io/en/stable/user/index.html" target="_blank" rel="noopener">FuseSoC User Guide</a></li>
<li><a href="https://stffrdhrn.github.io/hardware/embedded/openrisc/2019/06/11/or1k_marocchino.html" target="_blank" rel="noopener">OR1K Marocchino in Action</a></li>
</ul>
<h2 id="安装fuseSoc"><a href="#安装fuseSoc" class="headerlink" title="安装fuseSoc"></a>安装fuseSoc</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">~$ git <span class="built_in">clone</span> https://github.com/olofk/fusesoc</span><br><span class="line"></span><br><span class="line">~$ <span class="built_in">cd</span> fusesoc &amp;&amp; pip install -e .</span><br><span class="line"></span><br><span class="line">OR</span><br><span class="line">~$ pip install fusesoc</span><br></pre></td></tr></table></figure>
<h2 id="安装fusesoc-库"><a href="#安装fusesoc-库" class="headerlink" title="安装fusesoc 库"></a>安装fusesoc 库</h2><ul>
<li>从网络安装。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~$ fusesoc library add intgen https://github.com/openrisc/intgen.git</span><br></pre></td></tr></table></figure>
<ul>
<li>从本地安装</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~$ git <span class="built_in">clone</span> https://github.com/openrisc/mor1kx-generic.git</span><br><span class="line">~$ git <span class="built_in">clone</span> https://github.com/openrisc/or1k_marocchino.git</span><br><span class="line"></span><br><span class="line">~$ fusesoc library add mor1kx-generic `<span class="built_in">pwd</span>`/mor1kx-generic</span><br><span class="line">~$ fusesoc library add or1k_marocchino `<span class="built_in">pwd</span>`/or1k_marocchino</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">~$ fusesoc list-cores</span><br><span class="line">Available cores:</span><br><span class="line"></span><br><span class="line">Core                      Cache status  Description</span><br><span class="line">================================================================================</span><br><span class="line">::blinky:0               :      <span class="built_in">local</span> : &lt;No description&gt;</span><br><span class="line">::intgen:0               :      <span class="built_in">local</span> : Interrupt Generator For testing Processors</span><br><span class="line">::mor1kx-generic:1.1     :      <span class="built_in">local</span> : Minimal mor1kx simulation environment</span><br><span class="line">::or1k_marocchino:5.0-r3 :      <span class="built_in">local</span> : &lt;No description&gt;</span><br><span class="line">::plights:0              :      <span class="built_in">local</span> : &lt;No description&gt;</span><br><span class="line">::rv_sopc:0              :      <span class="built_in">local</span> : RISC V system on programmable chip example</span><br><span class="line">::wb_intercon_gen_ng:0   :      <span class="built_in">local</span> : CAPI=2 .core file description based Wishbone Interconnect generator</span><br></pre></td></tr></table></figure>
<ul>
<li>查看<code>fusesoc.conf</code>配置。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">~$ cat fusesoc.conf</span><br><span class="line">[library.mor1kx-generic]</span><br><span class="line">location = /fullpath/FPGA-DE0-Nano/openrisc/mor1kx-generic</span><br><span class="line">sync-uri = /fullpath/FPGA-DE0-Nano/openrisc/mor1kx-generic</span><br><span class="line">sync-type = <span class="built_in">local</span></span><br><span class="line">auto-sync = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[library.or1k_marocchino]</span><br><span class="line">location = /fullpath/FPGA-DE0-Nano/openrisc/or1k_marocchino</span><br><span class="line">sync-uri = /fullpath/FPGA-DE0-Nano/openrisc/or1k_marocchino</span><br><span class="line">sync-type = <span class="built_in">local</span></span><br><span class="line">auto-sync = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[library.intgen]</span><br><span class="line">location = /fullpath/FPGA-DE0-Nano/openrisc/intgen</span><br><span class="line">sync-uri = /fullpath/FPGA-DE0-Nano/openrisc/intgen</span><br><span class="line">sync-type = <span class="built_in">local</span></span><br><span class="line">auto-sync = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[library.fusesoc-demos]</span><br><span class="line">location = fusesoc_libraries/fusesoc-demos</span><br><span class="line">sync-uri = https://github.com/Oxore/fusesoc-demos</span><br><span class="line">sync-type = git</span><br><span class="line">auto-sync = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h1 id="RISC-V"><a href="#RISC-V" class="headerlink" title="RISC-V"></a>RISC-V</h1><ul>
<li><a href="https://github.com/litex-hub/linux-on-litex-vexriscv" target="_blank" rel="noopener">linux-on-litex-vexriscv</a></li>
<li><a href="https://github.com/SpinalHDL/VexRiscv" target="_blank" rel="noopener">VexRiscv</a></li>
</ul>
<h2 id="Fusesoc-demos"><a href="#Fusesoc-demos" class="headerlink" title="Fusesoc-demos"></a>Fusesoc-demos</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fusesoc library add  https://github.com/Oxore/fusesoc-demos</span><br></pre></td></tr></table></figure>
<h1 id="其它项目"><a href="#其它项目" class="headerlink" title="其它项目"></a>其它项目</h1><ul>
<li><a href="https://github.com/open-design/riscv-soc-cores" target="_blank" rel="noopener">open-design/riscv-soc-cores</a></li>
<li><a href="https://github.com/ikwzm/FPGA-SoC-Linux" target="_blank" rel="noopener">ikwzm/FPGA-SoC-Linux</a>, 下一步实践。</li>
<li><a href="http://www.nxlab.fer.hr/fpgarduino/" target="_blank" rel="noopener">fpgarduino</a>需要实践一下。</li>
<li><a href="https://www.librecores.org/olofk/serv" target="_blank" rel="noopener">olofk/serv</a> SERV - the SErial RISC-V CPU by olofk</li>
<li><a href="https://github.com/Dmitriy0111/nanoFOX" target="_blank" rel="noopener">Dmitriy0111/nanoFOX</a></li>
</ul>
<h1 id="USB-Blaster连接问题"><a href="#USB-Blaster连接问题" class="headerlink" title="USB Blaster连接问题"></a>USB Blaster连接问题</h1><ul>
<li><a href="https://wiki.archlinux.org/index.php/Altera_Design_Software#Error_when_scanning_hardware_-_Server_error" target="_blank" rel="noopener">Altera Design Software</a></li>
</ul>
<ul>
<li>因为这里只想使用<code>quartus_pgm</code>命令，就只下载了<code>QuartusProgrammerSetup-16.1.0.196-linux.run</code>。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jtagd --foreground --debug</span><br><span class="line"></span><br><span class="line">./jtagd --user-start --foreground</span><br><span class="line">./jtagconfig</span><br><span class="line">Error (Server error) when scanning hardware</span><br></pre></td></tr></table></figure>
<ul>
<li>测看系统日志</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~$ dmesg</span><br><span class="line">[...]</span><br><span class="line">[25811.819181] usb 4-2: USB disconnect, device number 16</span><br><span class="line">[25814.375520] usb 4-2: new full-speed USB device number 17 using xhci_hcd</span><br><span class="line">[25814.550270] usb 4-2: New USB device found, idVendor=09fb, idProduct=6001, bcdDevice= 4.00</span><br><span class="line">[25814.550283] usb 4-2: New USB device strings: Mfr=1, Product=2, SerialNumber=3</span><br><span class="line">[25814.550289] usb 4-2: Product: USB-Blaster</span><br><span class="line">[25814.550293] usb 4-2: Manufacturer: Altera</span><br><span class="line">[25814.550297] usb 4-2: SerialNumber: 91d28408</span><br></pre></td></tr></table></figure>
<ul>
<li><p>直接运行<code>jtagconfig</code>命令,就出现下面这个错。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$ ./jtagconfig</span><br><span class="line">Error when scanning hardware - Server error</span><br></pre></td></tr></table></figure>
</li>
<li><p>然后用<code>strace</code>运行只过滤查看<code>network</code>运行情况如下：</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">~$ strace -e trace=network jtagconfig</span><br><span class="line">[...]</span><br><span class="line">si_stime=0&#125; ---</span><br><span class="line">socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 3</span><br><span class="line">setsockopt(3, SOL_TCP, TCP_NODELAY, [1], 4) = 0</span><br><span class="line">setsockopt(3, SOL_SOCKET, SO_LINGER, &#123;l_onoff=1, l_linger=10&#125;, 8) = 0</span><br><span class="line">connect(3, &#123;sa_family=AF_INET, sin_port=htons(1309), sin_addr=inet_addr(<span class="string">"127.0.0.1"</span>)&#125;, 16) = -1 EINPROGRESS (Operation now <span class="keyword">in</span> progress)</span><br><span class="line">socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 4</span><br><span class="line">setsockopt(4, SOL_TCP, TCP_NODELAY, [1], 4) = 0</span><br><span class="line">setsockopt(4, SOL_SOCKET, SO_LINGER, &#123;l_onoff=1, l_linger=10&#125;, 8) = 0</span><br><span class="line">connect(4, &#123;sa_family=AF_INET, sin_port=htons(1309), sin_addr=inet_addr(<span class="string">"127.0.0.1"</span>)&#125;, 16) = -1 EINPROGRESS (Operation now <span class="keyword">in</span> progress)</span><br><span class="line">getsockopt(3, SOL_SOCKET, SO_ERROR, [0], [4]) = 0</span><br><span class="line">recvfrom(3, <span class="string">""</span>, 2, 0, NULL, NULL)       = 0</span><br><span class="line">getsockopt(4, SOL_SOCKET, SO_ERROR, [0], [4]) = 0</span><br><span class="line">recvfrom(4, <span class="string">""</span>, 2, 0, NULL, NULL)       = 0</span><br><span class="line">recvfrom(-1, 0x1e4ca0c, 2, 0, NULL, NULL) = -1 EBADF (Bad file descriptor)</span><br></pre></td></tr></table></figure>
<ul>
<li>为排除硬件问题，又没有第二台电脑系统可试。使用<code>Virtualbox</code>安装了一个同版本的系统测试，发现在虚拟机里不做任何设置，就可以正常发现<br>设备。如下:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~$ ./jtagconfig</span><br><span class="line">1) USB-Blaster [2-2]</span><br><span class="line">  Unable to <span class="built_in">read</span> device chain - JTAG chain broken</span><br></pre></td></tr></table></figure>
<ul>
<li>再次按装官方文档，安装添加<code>udev</code>相关设置，再把<code>jtagd</code>开启调试模式如下：</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">~<span class="comment"># cat&gt;/etc/udev/rules.d/51-altera-usb-blaster.rules&lt;&lt;EOF</span></span><br><span class="line">SUBSYSTEM==<span class="string">"usb"</span>, ATTR&#123;idVendor&#125;==<span class="string">"09fb"</span>, ATTR&#123;idProduct&#125;==<span class="string">"6001"</span>, MODE=<span class="string">"0666"</span></span><br><span class="line">SUBSYSTEM==<span class="string">"usb"</span>, ATTR&#123;idVendor&#125;==<span class="string">"09fb"</span>, ATTR&#123;idProduct&#125;==<span class="string">"6002"</span>, MODE=<span class="string">"0666"</span></span><br><span class="line">SUBSYSTEM==<span class="string">"usb"</span>, ATTR&#123;idVendor&#125;==<span class="string">"09fb"</span>, ATTR&#123;idProduct&#125;==<span class="string">"6003"</span>, MODE=<span class="string">"0666"</span></span><br><span class="line">SUBSYSTEM==<span class="string">"usb"</span>, ATTR&#123;idVendor&#125;==<span class="string">"09fb"</span>, ATTR&#123;idProduct&#125;==<span class="string">"6010"</span>, MODE=<span class="string">"0666"</span></span><br><span class="line">SUBSYSTEM==<span class="string">"usb"</span>, ATTR&#123;idVendor&#125;==<span class="string">"09fb"</span>, ATTR&#123;idProduct&#125;==<span class="string">"6810"</span>, MODE=<span class="string">"0666"</span></span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">~$ jtagd --foreground --debug</span><br><span class="line">JTAG daemon started</span><br><span class="line">Using config file /etc/jtagd/jtagd.conf</span><br><span class="line">Remote JTAG permitted when password <span class="built_in">set</span></span><br><span class="line">USB-Blaster <span class="string">"USB-Blaster"</span> firmware version 4.00</span><br><span class="line">USB-Blaster endpoints out=02(64), <span class="keyword">in</span>=81(64); urb size=1024</span><br><span class="line">USB-Blaster added <span class="string">"USB-Blaster [4-2]"</span></span><br><span class="line">USB-Blaster port (/dev/bus/usb/004/017) opened</span><br></pre></td></tr></table></figure>
<ul>
<li>但是直接运行<code>jtagconfig</code>还是会报<code>Error when scanning hardware - Server error</code>错误。后面按照上述文档进行下面的设置就可以<br>了。</li>
</ul>
<h2 id="jtagd服务端配置"><a href="#jtagd服务端配置" class="headerlink" title="jtagd服务端配置"></a><code>jtagd</code>服务端配置</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">~<span class="comment"># cp /fullpath/intelFPGA_lite/16.1/qprogrammer/linux64/pgm_parts.txt /etc/jtagd/jtagd.pgm_parts</span></span><br><span class="line">~<span class="comment"># echo "Password = \"123456\";" &gt; /etc/jtagd/jtagd.conf</span></span><br><span class="line">~<span class="comment"># killall -9 jtagd</span></span><br><span class="line">~$ jtagd --foreground --debug</span><br><span class="line">JTAG daemon started</span><br><span class="line">Using config file /etc/jtagd/jtagd.conf</span><br><span class="line">Remote JTAG permitted when password <span class="built_in">set</span></span><br><span class="line">USB-Blaster <span class="string">"USB-Blaster"</span> firmware version 4.00</span><br><span class="line">USB-Blaster endpoints out=02(64), <span class="keyword">in</span>=81(64); urb size=1024</span><br><span class="line">USB-Blaster added <span class="string">"USB-Blaster [6-2]"</span></span><br><span class="line">USB-Blaster port (/dev/bus/usb/006/002) opened</span><br><span class="line">USB-Blaster <span class="string">"USB-Blaster"</span> firmware version 4.00</span><br><span class="line">USB-Blaster endpoints out=02(64), <span class="keyword">in</span>=81(64); urb size=1024</span><br><span class="line">USB-Blaster reports JTAG protocol version 0, using version 0</span><br></pre></td></tr></table></figure>
<h2 id="jtagconfig配置"><a href="#jtagconfig配置" class="headerlink" title="jtagconfig配置"></a><code>jtagconfig</code>配置</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~$ jtagconfig --addserver 127.0.0.1 123456</span><br><span class="line">~$ jtagconfig</span><br><span class="line">1) USB-Blaster on 127.0.0.1 [6-2]</span><br><span class="line">  020F30DD   EP3C25/EP4CE22</span><br></pre></td></tr></table></figure>
<h1 id="谢谢支持"><a href="#谢谢支持" class="headerlink" title="谢谢支持"></a>谢谢支持</h1><ul>
<li>微信二维码:</li>
</ul>
<p><img src="/imgs/mm_reward_qrcode_1525013906055.png" width="40%" height="40%" align="center/"></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/FPGA-RISC-V-Linux/" rel="tag"># FPGA,RISC-V,Linux</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/01/13/机器学习-ML-环境的搭建/" rel="prev" title="机器学习(ML)环境的搭建">
      <i class="fa fa-chevron-left"></i> 机器学习(ML)环境的搭建
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/02/13/Kubernetes使用指南/" rel="next" title="Kubernetes使用指南">
      Kubernetes使用指南 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#OpenRISC"><span class="nav-number">1.</span> <span class="nav-text">OpenRISC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#管脚定义"><span class="nav-number">1.1.</span> <span class="nav-text">管脚定义</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#GPIO-0-Pin-Assignments"><span class="nav-number">1.1.1.</span> <span class="nav-text">GPIO-0 Pin Assignments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GPIO-1-Pin-Assignments"><span class="nav-number">1.1.2.</span> <span class="nav-text">GPIO-1 Pin Assignments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Table-3-8-Pin-Assignments-for-2x13-Header"><span class="nav-number">1.1.3.</span> <span class="nav-text">Table 3-8 Pin Assignments for 2x13 Header</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Table-3-9-Pin-Assignments-for-ADC"><span class="nav-number">1.1.4.</span> <span class="nav-text">Table 3-9 Pin Assignments for ADC</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GCC工具链"><span class="nav-number">1.2.</span> <span class="nav-text">GCC工具链</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编译ORPSOC"><span class="nav-number">1.3.</span> <span class="nav-text">编译ORPSOC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编译Linux"><span class="nav-number">1.4.</span> <span class="nav-text">编译Linux</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#烧写入bitstream"><span class="nav-number">1.5.</span> <span class="nav-text">烧写入bitstream</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#连接串号"><span class="nav-number">1.6.</span> <span class="nav-text">连接串号</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#FuseSOC-试用"><span class="nav-number">2.</span> <span class="nav-text">FuseSOC 试用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装fuseSoc"><span class="nav-number">2.1.</span> <span class="nav-text">安装fuseSoc</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装fusesoc-库"><span class="nav-number">2.2.</span> <span class="nav-text">安装fusesoc 库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RISC-V"><span class="nav-number">3.</span> <span class="nav-text">RISC-V</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Fusesoc-demos"><span class="nav-number">3.1.</span> <span class="nav-text">Fusesoc-demos</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#其它项目"><span class="nav-number">4.</span> <span class="nav-text">其它项目</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#USB-Blaster连接问题"><span class="nav-number">5.</span> <span class="nav-text">USB Blaster连接问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#jtagd服务端配置"><span class="nav-number">5.1.</span> <span class="nav-text">jtagd服务端配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jtagconfig配置"><span class="nav-number">5.2.</span> <span class="nav-text">jtagconfig配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#谢谢支持"><span class="nav-number">6.</span> <span class="nav-text">谢谢支持</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="yjdwbj"
      src="https://avatars0.githubusercontent.com/u/321919?s=400&u=67298bd9fc3b622eaf93a6cc511a24ac878e86db&v=4">
  <p class="site-author-name" itemprop="name">yjdwbj</p>
  <div class="site-description" itemprop="description">最是人间留不住,朱颜辞镜花辞树</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">43</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yjdwbj</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
