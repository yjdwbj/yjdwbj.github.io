<!DOCTYPE html>






  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.2.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.2.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="相关链接
elftosb
imx-bootlets
Arm None Toolchain
Linaro Toolchain
i.MX280: Multimedia Applications Processors
i.MX28 Applications Processor Reference Manual



U-Boot 2017.11
这里参照开发板原版的u-boot-2009修改部分源码与">
<meta property="og:type" content="article">
<meta property="og:title" content="为iMX28-EVK移植Linux内核与U-Boot">
<meta property="og:url" content="http://yoursite.com/2018/07/05/为iMX28-EVK移植Linux内核与U-Boot/index.html">
<meta property="og:site_name" content="Sunrise 博客">
<meta property="og:description" content="相关链接
elftosb
imx-bootlets
Arm None Toolchain
Linaro Toolchain
i.MX280: Multimedia Applications Processors
i.MX28 Applications Processor Reference Manual



U-Boot 2017.11
这里参照开发板原版的u-boot-2009修改部分源码与">
<meta property="og:image" content="http://yoursite.com/imgs/imx28evk-pin.png">
<meta property="og:image" content="http://yoursite.com/imgs/imx28evk-pin-324.png">
<meta property="og:image" content="http://yoursite.com/imgs/imx28evk-dma_apbx.png">
<meta property="og:image" content="http://yoursite.com/imgs/hmc5883l.png">
<meta property="og:image" content="http://yoursite.com/imgs/mm_reward_qrcode_1525013906055.png">
<meta property="og:updated_time" content="2020-02-25T00:29:02.987Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="为iMX28-EVK移植Linux内核与U-Boot">
<meta name="twitter:description" content="相关链接
elftosb
imx-bootlets
Arm None Toolchain
Linaro Toolchain
i.MX280: Multimedia Applications Processors
i.MX28 Applications Processor Reference Manual



U-Boot 2017.11
这里参照开发板原版的u-boot-2009修改部分源码与">
<meta name="twitter:image" content="http://yoursite.com/imgs/imx28evk-pin.png">






  <link rel="canonical" href="http://yoursite.com/2018/07/05/为iMX28-EVK移植Linux内核与U-Boot/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>为iMX28-EVK移植Linux内核与U-Boot | Sunrise 博客</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-78826582-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-78826582-1');
</script>






  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sunrise 博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/05/为iMX28-EVK移植Linux内核与U-Boot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yjdwbj">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/321919?s=400&u=67298bd9fc3b622eaf93a6cc511a24ac878e86db&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sunrise 博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">为iMX28-EVK移植Linux内核与U-Boot
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-05 22:29:23" itemprop="dateCreated datePublished" datetime="2018-07-05T22:29:23+08:00">2018-07-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-02-25 08:29:02" itemprop="dateModified" datetime="2020-02-25T08:29:02+08:00">2020-02-25</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <ul>
<li>相关链接<ul>
<li><a href="http://repository.timesys.com/buildsources/e/elftosb/elftosb-10.12.01/" target="_blank" rel="external">elftosb</a></li>
<li><a href="http://repository.timesys.com/buildsources/i/imx-bootlets/imx-bootlets-10.12.01" target="_blank" rel="external">imx-bootlets</a></li>
<li><a href="https://launchpad.net/gcc-arm-embedded/4.9/4.9-2015-q3-update/+download/gcc-arm-none-eabi-4_9-2015q3-20150921-linux.tar.bz2" target="_blank" rel="external">Arm None Toolchain</a></li>
<li><a href="https://releases.linaro.org/components/toolchain/binaries/4.9-2017.01/arm-linux-gnueabi" target="_blank" rel="external">Linaro Toolchain</a></li>
<li><a href="https://www.nxp.com/products/processors-and-microcontrollers/applications-processors/i.mx-applications-processors/i.mx28-processors/multimedia-applications-processors-low-power-high-performance-arm9-core:i.MX280" target="_blank" rel="external">i.MX280: Multimedia Applications Processors</a></li>
<li><a href="https://www.nxp.com/docs/en/reference-manual/MCIMX28RM.pdf" target="_blank" rel="external">i.MX28 Applications Processor Reference Manual</a></li>
</ul>
</li>
</ul>
<h1 id="U-Boot-2017-11"><a href="#U-Boot-2017-11" class="headerlink" title="U-Boot 2017.11"></a>U-Boot 2017.11</h1><ul>
<li>这里参照开发板原版的<code>u-boot-2009</code>修改部分源码与配置文件才可以正常启动,<a href="https://github.com/yjdwbj/iMX28-EVK-BSP/blob/master/uboot-2017.11-imx28evk.config" target="_blank" rel="external"><strong>配置文件</strong></a>,<a href="https://raw.githubusercontent.com/yjdwbj/iMX28-EVK-BSP/master/patchs/u-boot-2017.11-imx28evk.patch" target="_blank" rel="external"><strong>补丁文件</strong></a></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">~$ make ARCH=arm CROSS_COMPILE=arm-none-eabi- O=../imx28evk mx28evk_defconfig</div><div class="line">~$ <span class="built_in">cd</span> ../imx28evk</div><div class="line">~$ make ARCH=arm CROSS_COMPILE=arm-none-eabi- u-boot.sb</div></pre></td></tr></table></figure>
<h1 id="tftpd-hpa-安装"><a href="#tftpd-hpa-安装" class="headerlink" title="tftpd-hpa 安装"></a>tftpd-hpa 安装</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">~$ sudo apt-get install tftpd-hpa</div><div class="line">~$ cat /etc/default/tftpd-hpa</div><div class="line"><span class="comment"># /etc/default/tftpd-hpa</span></div><div class="line">TFTP_USERNAME=<span class="string">"tftp"</span></div><div class="line">TFTP_DIRECTORY=<span class="string">"/srv/tftp"</span></div><div class="line">TFTP_ADDRESS=<span class="string">"0.0.0.0:69"</span></div><div class="line">TFTP_OPTIONS=<span class="string">"-l -c -s"</span></div></pre></td></tr></table></figure>
<h1 id="NFS-Server-配置"><a href="#NFS-Server-配置" class="headerlink" title="NFS Server 配置"></a>NFS Server 配置</h1><ul>
<li>确保 CS 两端的 NFS 协议版本要兼容,<code>exports</code>的路径一致.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">~$　cat /proc/fs/nfsd/versions</div><div class="line">+２ +3 +4 +4.1 +4.2</div><div class="line"></div><div class="line">$ cat /etc/exports</div><div class="line"><span class="comment"># /etc/exports: the access control list for filesystems which may be exported</span></div><div class="line"><span class="comment">#		to NFS clients.  See exports(5).</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Example for NFSv2 and NFSv3:</span></div><div class="line"><span class="comment"># /srv/homes       hostname1(rw,sync,no_subtree_check) hostname2(ro,sync,no_subtree_check)</span></div><div class="line">/fullpath/nfs-imx28evk 192.168.1.0/24(rw,no_root_squash,subtree_check)</div></pre></td></tr></table></figure>
<hr>
<h1 id="U-boot-使用"><a href="#U-boot-使用" class="headerlink" title="U-boot 使用"></a>U-boot 使用</h1><h2 id="公共变量"><a href="#公共变量" class="headerlink" title="公共变量"></a>公共变量</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">=&gt; setenv console_mainline ttyAMA0</div><div class="line">=&gt; setenv buadrate 115200</div><div class="line">=&gt; setenv tftpboot <span class="string">"tftp <span class="variable">$&#123;zImage&#125;</span> ; bootz"</span></div><div class="line">=&gt; setenv mmcfatboot <span class="string">"mmc rescan ; fatload mmc 0 <span class="variable">$&#123;loadaddr&#125;</span> <span class="variable">$&#123;zImage&#125;</span> ; bootz"</span></div><div class="line">=&gt; setenv mmcextboot <span class="string">"mmc rescan ; ext4load mmc 0:1 <span class="variable">$&#123;loadaddr&#125;</span> <span class="variable">$&#123;zImage&#125;</span> ; bootz"</span></div><div class="line">=&gt; setenv nandboot <span class="string">"mtdparts default ; nand read.jffs2 <span class="variable">$&#123;loadaddr&#125;</span> <span class="variable">$&#123;kerneladdr&#125;</span> <span class="variable">$&#123;kernelsize&#125;</span> ; bootz"</span></div><div class="line">=&gt; setenv zImage  zImage_dtb</div><div class="line">=&gt; setenv ipaddr 192.168.1.10</div><div class="line">=&gt; setenv serverip 192.168.1.100</div><div class="line">=&gt; setenv netmask 255.255.255.0</div><div class="line">=&gt; setenv gatewayip 192.168.1.1</div><div class="line">=&gt; setenv eth eth0</div><div class="line">=&gt; setenv hostname imx283-lcy</div><div class="line">=&gt; setenv kernelsize 0x00400000</div><div class="line">=&gt; setenv kerneladdr 0x00200000</div></pre></td></tr></table></figure>
<hr>
<h2 id="NFS-ROOTFS"><a href="#NFS-ROOTFS" class="headerlink" title="NFS ROOTFS"></a>NFS ROOTFS</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">=&gt; setenv nfsrootpath  /opt/nfs-imx28evk</div><div class="line">=&gt; setenv ipstatic <span class="string">"ip=<span class="variable">$&#123;ipaddr&#125;</span>:<span class="variable">$&#123;serverip&#125;</span>:<span class="variable">$&#123;gatewayip&#125;</span>:<span class="variable">$&#123;netmask&#125;</span>:<span class="variable">$&#123;hostname&#125;</span>:<span class="variable">$&#123;eth&#125;</span>:off"</span></div><div class="line">=&gt; setenv nfsargs <span class="string">"setenv bootargs consoel=<span class="variable">$&#123;console_mainline&#125;</span>,<span class="variable">$&#123;buadrate&#125;</span> root=/dev/nfs  rw nfsroot=<span class="variable">$&#123;serverip&#125;</span>:&#123;<span class="variable">$nfsrootpath</span>&#125;,v3,tcp,nolock <span class="variable">$&#123;ipstatic&#125;</span> init=/linuxrc"</span></div><div class="line">=&gt; setenv bootcmd_nfs <span class="string">"run nfsargs ; run <span class="variable">$&#123;tftpboot&#125;</span>"</span></div><div class="line">=&gt; savee</div><div class="line">=&gt; run nfs_root</div></pre></td></tr></table></figure>
<h2 id="MMC-ROOTFS"><a href="#MMC-ROOTFS" class="headerlink" title="MMC ROOTFS"></a>MMC ROOTFS</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">=&gt; setenv mmcargs <span class="string">"mmc rescan ; setenv bootargs consoel=<span class="variable">$&#123;console_mainline&#125;</span>,<span class="variable">$&#123;buadrate&#125;</span> rootfstype=ext3　 root=/dev/mmcblk0p3 rw rootwait"</span></div><div class="line">=&gt; setenv bootcmd_mmc <span class="string">"run mmcargs ; run <span class="variable">$&#123;mmcfatboot&#125;</span>"</span></div><div class="line">=&gt; savee</div><div class="line">=&gt; run bootcmd_mmc</div></pre></td></tr></table></figure>
<h2 id="USB-Stack-ROOTFS"><a href="#USB-Stack-ROOTFS" class="headerlink" title="USB Stack ROOTFS"></a>USB Stack ROOTFS</h2><ul>
<li>Ｕ盘的方法与 MMC 的方式是一样的.</li>
</ul>
<h2 id="UBIFS-ROOTFS"><a href="#UBIFS-ROOTFS" class="headerlink" title="UBIFS ROOTFS"></a>UBIFS ROOTFS</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">=&gt; mtdparts</div><div class="line"></div><div class="line">device nand0 &lt;gpmi-nand&gt;, <span class="comment"># parts = 7</span></div><div class="line"> <span class="comment">#: name                size            offset          mask_flags</span></div><div class="line"> 0: boot                0x00c00000      0x00000000      0</div><div class="line"> 1: env                 0x00080000      0x00c00000      0</div><div class="line"> 2: reserve             0x00080000      0x00c80000      0</div><div class="line"> 3: bmp                 0x00200000      0x00d00000      0</div><div class="line"> 4: reserve             0x00080000      0x00f00000      0</div><div class="line"> 5: rootfs              0x04000000      0x00f80000      0</div><div class="line"> 6: opt                 0x03080000      0x04f80000      0</div><div class="line"></div><div class="line">active partition: nand0,0 - (boot) 0x00c00000 @ 0x00000000</div><div class="line"></div><div class="line">defaults:</div><div class="line">mtdids  : nand0=gpmi-nand</div><div class="line">mtdparts: mtdparts=gpmi-nand:12m(boot),512k(env),512k(reserve),2m(bmp),512k(reserve),64m(rootfs),-(opt)</div><div class="line">=&gt; ubi part rootfs</div><div class="line">ubi0: attaching mtd1</div><div class="line">ubi0: scanning is finished</div><div class="line">ubi0 warning: print_rsvd_warning: cannot reserve enough PEBs <span class="keyword">for</span> bad PEB handling, reserved 5, need 20</div><div class="line">ubi0: attached mtd1 (name <span class="string">"mtd=5"</span>, size 64 MiB)</div><div class="line">ubi0: PEB size: 131072 bytes (128 KiB), LEB size: 126976 bytes</div><div class="line">ubi0: min./max. I/O unit sizes: 2048/2048, sub-page size 2048</div><div class="line">ubi0: VID header offset: 2048 (aligned 2048), data offset: 4096</div><div class="line">ubi0: good PEBs: 512, bad PEBs: 0, corrupted PEBs: 0</div><div class="line">ubi0: user volume: 1, internal volumes: 1, max. volumes count: 128</div><div class="line">ubi0: max/mean erase counter: 2/1, WL threshold: 4096, image sequence number: 0</div><div class="line">ubi0: available PEBs: 0, total reserved PEBs: 512, PEBs reserved <span class="keyword">for</span> bad PEB handling: 5</div><div class="line"></div><div class="line">// 这里显示boot分区有坏块了吗?这个分区反复擦写的次数比较多.</div><div class="line">=&gt;ubi part boot</div><div class="line">ubi0: detaching mtd1</div><div class="line">ubi0: mtd1 is detached</div><div class="line">ubi0: attaching mtd1</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 0:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 0:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 0:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 error: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 0:0, <span class="built_in">read</span> 64 bytes</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 1:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 1:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 1:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 error: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 1:0, <span class="built_in">read</span> 64 bytes</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 2:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 2:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 2:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 error: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 2:0, <span class="built_in">read</span> 64 bytes</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 3:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 3:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 warning: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 3:0, <span class="built_in">read</span> only 64 bytes, retry</div><div class="line">ubi0 error: ubi_io_read: error -74 (ECC error) <span class="keyword">while</span> reading 64 bytes from PEB 3:0, <span class="built_in">read</span> 64 bytes</div><div class="line">ubi0: scanning is finished</div><div class="line">ubi0 error: ubi_read_volume_table: the layout volume was not found</div><div class="line">ubi0 error: ubi_attach_mtd_dev: failed to attach mtd1, error -22</div><div class="line">UBI error: cannot attach mtd1UBI error: cannot initialize UBI, error -22UBI init error 22</div><div class="line"></div><div class="line">=&gt; setenv nandargs <span class="string">"setenv bootargs console=<span class="variable">$&#123;console_mainline&#125;</span>,<span class="variable">$&#123;baudrate&#125;</span> rootfstype=ubifs ubi.mtd=5 root=ubi0:rootfs mtdparts=gpmi-nand:12m(boot),512k(env),512k(reserve),2m(bmp),512k(reserve),64m(rootfs),-(opt) <span class="variable">$&#123;ipstatic&#125;</span>"</span></div><div class="line">=&gt; setenv bootcmd_nand <span class="string">"run nandargs ; run nandboot "</span></div><div class="line">=&gt; savee</div><div class="line">=&gt; run bootcmd_nand</div></pre></td></tr></table></figure>
<h2 id="通过网络更新-kernel"><a href="#通过网络更新-kernel" class="headerlink" title="通过网络更新 kernel"></a>通过网络更新 kernel</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">=&gt; setenv upkernel <span class="string">"tftp zImage_dtb ; nand erase clean <span class="variable">$&#123;kerneladdr&#125;</span> <span class="variable">$&#123;kernelsize&#125;</span> ; nand write.jffs2 <span class="variable">$&#123;loadaddr&#125;</span> <span class="variable">$&#123;kerneladdr&#125;</span> <span class="variable">$&#123;kernelsize&#125;</span>"</span></div></pre></td></tr></table></figure>
<h2 id="通过网络更新-nand-文件系统"><a href="#通过网络更新-nand-文件系统" class="headerlink" title="通过网络更新 nand 文件系统"></a>通过网络更新 nand 文件系统</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">=&gt; setenv uprootfs <span class="string">"mtdparts default ; nand erase.part rootfs ; ubi part rootfs ; ubi create rootfs ; tftp <span class="variable">$&#123;rootfs&#125;</span> ; ubi write <span class="variable">$&#123;loadaddr&#125;</span> rootfs <span class="variable">$&#123;filesize&#125;</span>"</span></div></pre></td></tr></table></figure>
<h1 id="imx-bootlets"><a href="#imx-bootlets" class="headerlink" title="imx-bootlets"></a>imx-bootlets</h1><ul>
<li>imx-bootlets 可以使用开发板自带的源码,也可以从这里<a href="http://repository.timesys.com/buildsources/i/imx-bootlets/imx-bootlets-10.12.01" target="_blank" rel="external">imx-bootlets</a>下载.它只能使用<a href="https://launchpad.net/gcc-arm-embedded/4.9/4.9-2015-q3-update/+download/gcc-arm-none-eabi-4_9-2015q3-20150921-linux.tar.bz2" target="_blank" rel="external">arm-none-eabi-</a>工具链编译,我换成<a href="https://releases.linaro.org/components/toolchain/binaries/4.9-2017.01/arm-linux-gnueabi" target="_blank" rel="external">Linaro Toolchain</a>工具链编译之后无法启动.编译中的脚本会要用到<a href="http://repository.timesys.com/buildsources/e/elftosb/elftosb-10.12.01/" target="_blank" rel="external">elftosb</a>,要先把<code>elftosb</code>编译出来.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">~$ <span class="built_in">cd</span> imx-bootlets</div><div class="line">~$ ln -svf ../linux-4.13/build_output/zImage_dtb zImage   // 链接内核到这里</div><div class="line">~$ ln -svf ../u-boot-2017-9/imx28evk/uboot uboot　　　　　　//　链接uboot到这里</div><div class="line">~$ make BOARD=iMX28_EVK ARCH=mx28 CROSS_COMPILE=arm-none-eabi- clean</div><div class="line">~$ make BOARD=iMX28_EVK ARCH=mx28 CROSS_COMPILE=arm-none-eabi-</div><div class="line">~$ ls *.bd</div><div class="line">linux.bd  linux_ivt.bd  uboot.bd  uboot_ivt.bd  updater.bd  updater_ivt.bd</div><div class="line">~$  ls *.sb</div><div class="line">imx28_ivt_linux.sb  imx28_ivt_uboot.sb  imx28_linux.sb  imx28_uboot.sb</div></pre></td></tr></table></figure>
<h2 id="IMX280A-USB-烧写模式"><a href="#IMX280A-USB-烧写模式" class="headerlink" title="IMX280A USB 烧写模式"></a>IMX280A USB 烧写模式</h2><ul>
<li>短接 JP4-&gt;WDG,JP6-&gt;USB, 接上<code>USB_DEV接口</code>,当然<code>POWER</code>接口也是要接上的,系统就会出现下列硬件.这里要使用<code>MfgTool</code>工具烧入,相对较麻烦一些.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Bus 008 Device 005: ID 15a2:004f Freescale Semiconductor, Inc. i.MX28 SystemOnChip <span class="keyword">in</span> RecoveryMode</div></pre></td></tr></table></figure>
<h2 id="IMX280-TF-烧写模式"><a href="#IMX280-TF-烧写模式" class="headerlink" title="IMX280 TF 烧写模式"></a>IMX280 TF 烧写模式</h2><ul>
<li>EasyARM iMX280A 这块板子可以支持 TF 卡烧写模式,通过串口发现,它里面有一个小系统经过上电之后从 TF 卡中读取名为<code>imx28_ivt_uboot.sb,rootfs.tar.bz2,uImage,updater_ivt.sb</code>,当然用来烧写 TF 卡是要用官方提供的<code>cfimager.exe</code>格式化,并烧入<code>updater_ivt.sb</code>才可以.</li>
<li>短接 JP4-&gt;WDG,JP3-&gt;USB, 接上串口打印,就会看相应的烧写日志输出了.</li>
</ul>
<hr>
<h1 id="BuildRoot-文件系统"><a href="#BuildRoot-文件系统" class="headerlink" title="BuildRoot 文件系统"></a>BuildRoot 文件系统</h1><ul>
<li>使用 BusyBox 的制作<code>rootfs</code>的方式比较老了,使用 BuildRoot 可以一站式解决嵌入式的系统移植,这里我只使用它来做<strong>rootfs</strong>的编译,<strong>kernel,u-boot</strong>这里我是单独立维护的.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">~$ <span class="built_in">export</span> TOPDIR=.</div><div class="line">~$ <span class="built_in">export</span> BASE_DIR=.</div><div class="line">~$ make ARCH=arm CROSS_COMPILE=arm-none-eabi- O=../build-imx28evk freescale_imx28evk_defconfig</div><div class="line">~$ <span class="built_in">cd</span> ../build-imx28evk &amp;&amp;  make ARCH=arm CROSS_COMPILE=arm-none-eabi- menuconfig</div></pre></td></tr></table></figure>
<ul>
<li>ToolChain 设置</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">  Toolchain <span class="built_in">type</span> (External toolchain)  ---&gt;</div><div class="line">  *** Toolchain External Options ***</div><div class="line">  Toolchain (Custom toolchain)  ---&gt;</div><div class="line">  Toolchain origin (Pre-installed toolchain)  ---&gt;</div><div class="line">  (/linaro-toolchain/gcc-linaro-5.5.0-2017.10-x86_64_arm-linux-gnueabi) Toolchain path</div><div class="line">  ($(ARCH)-linux-gnueabi) Toolchain prefix</div><div class="line">  External toolchain gcc version (5.x)  ---&gt;</div><div class="line">  External toolchain kernel headers series (4.0.x)  ---&gt;</div><div class="line">  External toolchain C library (glibc/eglibc)  ---&gt;</div><div class="line">  [*] Toolchain has SSP support?</div><div class="line">  [*] Toolchain has RPC support?</div><div class="line">  [*] Toolchain has C++ support?</div><div class="line">[...]</div><div class="line">  System configuration -&gt; Run a getty (login prompt ) after boot</div><div class="line"></div><div class="line">  │ │           --- Run a getty (login prompt) after boot                                         │ │</div><div class="line">  │ │           (ttyAMA0) TTY port                                                                │ │</div><div class="line">  │ │                 Baudrate (115200)  ---&gt;                                                     │ │</div><div class="line">  │ │           (vt100) TERM environment variable                                                 │ │</div><div class="line">  │ │           ()    other options to pass to getty                                              │ │</div><div class="line"></div><div class="line">[...]</div><div class="line"></div><div class="line">  Target packages -&gt; Networking applications</div><div class="line">  │ │           [*] dropbear                                                                      │ │</div><div class="line">  │ │           [*]   client programs                                                             │ │</div><div class="line">  │ │           [*]   <span class="built_in">disable</span> reverse DNS lookups                                                 │ │</div><div class="line">  │ │           [*]   optimize <span class="keyword">for</span> size                                                           │ │</div><div class="line">  │ │           [ ]   <span class="built_in">log</span> dropbear access to wtmp                                                 │ │</div><div class="line">  │ │           [ ]   <span class="built_in">log</span> dropbear access to lastlog                                              │ │</div><div class="line"></div><div class="line"> Target packages -&gt; Hardware handling</div><div class="line">       [*] evtest</div><div class="line">       [*] spi-tools</div><div class="line">       [*] lm-sensors</div><div class="line">       [*] i2c-tools</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#　如果下载文件需代理的通下面命令修改.</span></div><div class="line">BR2_WGET=<span class="string">"wget --passive-ftp -nd -t 3 -e use_proxy=yes -e http_proxy=192.168.1.235:4444 -e https_proxy=192.168.1.235:4444"</span></div></pre></td></tr></table></figure>
<ul>
<li>如果外部交叉编译工具链出现,少库的错误,还是选择使用<code>BuildRoot</code>编译的工具链吧.整个编译完成之后<code>build-imx28evk</code>目录如下:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ tree -L 1</div><div class="line">.</div><div class="line">├── build</div><div class="line">├── dl　　<span class="comment">#　软件源码下载的位置.</span></div><div class="line">├── host  <span class="comment"># 如查使用``BuildRoot``编译的工具链,这里就是工具链的位置.</span></div><div class="line">├── images　<span class="comment">#最终生成的各种镜像文件.</span></div><div class="line">├── Makefile</div><div class="line">├── staging -&gt; host/arm-buildroot-linux-gnueabi/sysroot</div><div class="line">└── target</div></pre></td></tr></table></figure>
<ul>
<li>参照 EasyArm imx280 的文档对 UBIFS 文件系统修改如下:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">　[*] tar the root filesystem</div><div class="line">│ │    Compression method (no compression)  ---&gt;</div><div class="line"></div><div class="line">[*] ubifs root filesystem</div><div class="line">│ │    (0x1f000) logical eraseblock size</div><div class="line">│ │    (0x800) minimum I/O unit size</div><div class="line">│ │    (512) maximum logical eraseblock count</div><div class="line">│ │    ubifs runtime compression (lzo)  ---&gt;</div><div class="line">│ │    Compression method (no compression)  ---&gt;</div></pre></td></tr></table></figure>
<hr>
<h2 id="BusyBox-配置静态编译"><a href="#BusyBox-配置静态编译" class="headerlink" title="BusyBox 配置静态编译"></a>BusyBox 配置静态编译</h2><ul>
<li>看了很多教材,都建议把<code>BusyBox</code>编译成静态连接,就不用复制一堆的库了.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">~$ make ARCH=arm CROSS_COMPILE=arm-none-eabi- busybox-menuconfig</div><div class="line"></div><div class="line">Busybox Settings　-&gt;　[*] Build BusyBox as a static binary (no shared libs)</div></pre></td></tr></table></figure>
<hr>
<h2 id="Linux-Kernel-配置"><a href="#Linux-Kernel-配置" class="headerlink" title="Linux Kernel 配置"></a>Linux Kernel 配置</h2><ul>
<li>如果要对<code>Buildroot</code>中的<strong>Kernel</strong>做细致栽剪设置,需要使用到下面命令,但是我这里是把　<code>U-boot,Linux Kernel</code>分开维护的.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~$ make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- linux-menuconfig</div></pre></td></tr></table></figure>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><ul>
<li>解压<code>rootfs.tar</code>到 NFS Root 或者 U 盘,SD 卡的分区都可以,同时为<code>Dropbear</code>添加公钥登录认证.方便使用<code>SSH</code>来能登录进行交互操作.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">~$ tree images</div><div class="line">images</div><div class="line">├── rootfs.cpio</div><div class="line">├── rootfs.ext2</div><div class="line">└── rootfs.tar</div><div class="line"></div><div class="line">~$ sudo tar xvf rootfs.tar -C /nfsroot/rootfs</div><div class="line">~<span class="comment"># cd /nfsroot/rootfs/root &amp;&amp; mkdir .ssh &amp;&amp; chmod 700 .ssh</span></div><div class="line">~<span class="comment"># cd .ssh &amp;&amp; echo "public key" &gt; authorized_keys &amp;&amp; chmod 600 authorized_keys</span></div></pre></td></tr></table></figure>
<h2 id="UBIFS-文件系统制作"><a href="#UBIFS-文件系统制作" class="headerlink" title="UBIFS 文件系统制作"></a>UBIFS 文件系统制作</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">~$ <span class="built_in">cd</span>  /nfsroot/</div><div class="line">~$ sudo mkfs.ubifs <span class="_">-d</span> rootfs <span class="_">-e</span> 0x1f000 -c 512 -m 0x800 -x lzo -o rootfs.ubifs</div></pre></td></tr></table></figure>
<h2 id="UBIFS-文件烧写"><a href="#UBIFS-文件烧写" class="headerlink" title="UBIFS 文件烧写"></a>UBIFS 文件烧写</h2><ul>
<li>下面建一条组合命令来通过 Uboot 从 SD 中读取 rootfs.ubifs 文件并烧写到 NAND 的 rootfs 分区中.从 USB 设备中也是类似.UBoot 命令中,ext4load 是从 ext3/ext4 的文件系统加载文件,fatload 是从 FAT32/FAText 文件系统中加载文件.如果从 USB 设备读取,先运行<code>usb reset</code>.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># MMC 卡单分区</span></div><div class="line">=&gt; ls mmc 0</div><div class="line">  2616657   zImage_dtb</div><div class="line">  7618560   rootfs.ubifs</div><div class="line">   635808   imx28_ivt_uboot.sb</div><div class="line">            .Trash-1000/</div><div class="line">  2488348   zImage</div><div class="line">  4718592   rootfs.ubi</div><div class="line"></div><div class="line">  <span class="comment"># 这里是列出一张多分区的MMC卡的文件系统列表,这是第一分区的内容.</span></div><div class="line">=&gt; ls mmc 0:1</div><div class="line">&lt;DIR&gt;       1024 .</div><div class="line">&lt;DIR&gt;       1024 ..</div><div class="line">&lt;DIR&gt;      12288 lost+found</div><div class="line">             225 uEnv.txt</div><div class="line">&lt;DIR&gt;       1024 boot</div><div class="line">&lt;DIR&gt;       1024 .Trash-1000</div><div class="line">         2643950 zImage_dtb</div><div class="line">         4317184 rootfs.ubifs</div><div class="line"></div><div class="line">=&gt;setenv burnsd_rootfs <span class="string">"mtdparts default;nand erase.part rootfs;ubi part rootfs 2048;ubi create rootfs;dcache on; mmc rescan; ext4load mmc 0:3 0x82000000 rootfs.ubifs; ubi write 0x82000000 rootfs <span class="variable">$&#123;filesize&#125;</span>; "</span></div><div class="line">=&gt; saveenv</div></pre></td></tr></table></figure>
<hr>
<h1 id="Linux-内核编译"><a href="#Linux-内核编译" class="headerlink" title="Linux 内核编译"></a>Linux 内核编译</h1><h2 id="Linux-下载及配置选项"><a href="#Linux-下载及配置选项" class="headerlink" title="Linux 下载及配置选项"></a>Linux 下载及配置选项</h2><ul>
<li>我这边针对<code>EasyARM 280A</code>的开发板修改的<a href="https://raw.githubusercontent.com/yjdwbj/iMX28-EVK-BSP/master/linux-4.14.51-imx28evk.config" target="_blank" rel="external"><strong>配置文件</strong></a>在这里,把它复制到编译目录里,改成<code>.config</code>就可以了.Linux 的源码部份只是改了设备树的部份,这是<a href="https://raw.githubusercontent.com/yjdwbj/iMX28-EVK-BSP/master/patchs/linux-4.14.51-imx28evk.patch" target="_blank" rel="external"><strong>补丁文件</strong></a></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">~$ wget -c https://cdn.kernel.org/pub/linux/kernel/v4.x/linux-4.14.51.tar.xz</div><div class="line">~$ tar xvf linux-4.14.51.tar.xz &amp;&amp; <span class="built_in">cd</span> linux-4.14.51</div><div class="line">~$ make ARCH=arm CROSS_COMPILE=arm-none-eabi- O=../imx28evk-kernel mxs_defconfig</div><div class="line"></div><div class="line"> GEN     ./Makefile</div><div class="line">  HOSTCC  scripts/kconfig/mconf.o</div><div class="line">  HOSTCC  scripts/kconfig/lxdialog/checklist.o</div><div class="line"> [...]</div><div class="line"></div><div class="line">~$ make ARCH=arm CROSS_COMPILE=arm-none-eabi- menuconfig</div><div class="line"></div><div class="line">Boot options -&gt; [*] Use appended device tree blob to zImage (EXPERIMENTAL)</div><div class="line">				[*]   Supplement the appended DTB with traditional ATAG information</div><div class="line">                Kernel <span class="built_in">command</span> line <span class="built_in">type</span> (Use bootloader kernel arguments <span class="keyword">if</span> available)  ---&gt;</div><div class="line">                 (console=ttyAMA0,115200n8 rootfstype=ubifs ubi.mtd=5 root=ubi0_0 rootwait=1 rw earlyprintk) Default kernel <span class="built_in">command</span> string</div><div class="line">                 Kernel <span class="built_in">command</span> line <span class="built_in">type</span> (Use bootloader kernel arguments <span class="keyword">if</span> available)  ---&gt;</div><div class="line">Kernel hacking → printk and dmesg options -&gt; [*] Enable dynamic printk() support</div><div class="line">				[*] Kernel low-level debugging <span class="built_in">functions</span> (<span class="built_in">read</span> <span class="built_in">help</span>!)</div><div class="line">                	Kernel low-level debugging port (i.MX28 Debug UART)  ---&gt;</div><div class="line">                [*] Early printk</div><div class="line">Device Drivers → Network device support → Ethernet driver support -&gt; Freescale devices -&gt; FEC ethernet controller</div></pre></td></tr></table></figure>
<h2 id="编译内核用设备树"><a href="#编译内核用设备树" class="headerlink" title="编译内核用设备树"></a>编译内核用设备树</h2><ul>
<li>Linux 内核３.x 以后都要使用设备树才能正常启动,可以把<code>DTB</code>附加到<code>zImage</code>后面,也可以在<code>U-Boot</code>中指定 dtb 文件路径.</li>
<li>设备树的 patch 如下.经过测试<code>iMX280A</code>必须改成<code>pinctrl-0 = &lt;&amp;duart_pins_b&gt;</code>不然串口<strong>ttyAMA0</strong>无法输入,同时修改时要注意 IO 定义的冲突处理.这里是我修改的<code>iMX280A</code>的设备树<a href="https://github.com/yjdwbj/iMX28-EVK-BSP/blob/master/patchs/linux-4.14.51-imx28evk.patch" target="_blank" rel="external">补丁文件</a></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~$ diff -Naur ../../linux-4.14.51/arch/arm/boot/dts/imx28-evk.dts ../linux-4.14.51/arch/arm/boot/dts/imx28-evk.dts &gt; ../linux-4.14.51-imx28evk.patch</div></pre></td></tr></table></figure>
<h2 id="设备树相关"><a href="#设备树相关" class="headerlink" title="设备树相关"></a>设备树相关</h2><ul>
<li>这里设备树配置要参照芯片的数据手册,还有内核的文档<code>Documentation/devicetree/bindings/pinctrl/fsl,mxs-pinctrl.txt</code>,下一面给出芯片管脚与内核对应定义示例.</li>
</ul>
<p><img src="/imgs/imx28evk-pin.png" alt="imx28evk"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ grep <span class="_">-e</span> <span class="string">"PWM0"</span> <span class="_">-e</span> <span class="string">"PWM1"</span> ./arch/arm/boot/dts/imx28-pinfunc.h</div><div class="line"><span class="comment">#define MX28_PAD_PWM0__PWM_0				0x3100</span></div><div class="line"><span class="comment">#define MX28_PAD_PWM1__PWM_1				0x3110</span></div><div class="line"><span class="comment">#define MX28_PAD_PWM0__I2C1_SCL				0x3101</span></div><div class="line"><span class="comment">#define MX28_PAD_PWM1__I2C1_SDA				0x3111</span></div><div class="line"><span class="comment">#define MX28_PAD_PWM0__DUART_RX				0x3102</span></div><div class="line"><span class="comment">#define MX28_PAD_PWM1__DUART_TX				0x3112</span></div><div class="line"><span class="comment">#define MX28_PAD_PWM0__GPIO_3_16			0x3103</span></div><div class="line"><span class="comment">#define MX28_PAD_PWM1__GPIO_3_17			0x3113</span></div></pre></td></tr></table></figure>
<p><img src="/imgs/imx28evk-pin-324.png" alt="imx28evk-pin-324"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ grep <span class="_">-e</span> <span class="string">"I2C0"</span>  ./arch/arm/boot/dts/imx28-pinfunc.h</div><div class="line"><span class="comment">#define MX28_PAD_I2C0_SCL__I2C0_SCL			0x3180</span></div><div class="line"><span class="comment">#define MX28_PAD_I2C0_SDA__I2C0_SDA			0x3190</span></div><div class="line"><span class="comment">#define MX28_PAD_AUART0_RX__I2C0_SCL			0x3001</span></div><div class="line"><span class="comment">#define MX28_PAD_AUART0_TX__I2C0_SDA			0x3011</span></div><div class="line"><span class="comment">#define MX28_PAD_I2C0_SCL__TIMROT_ROTARYA		0x3181</span></div><div class="line"><span class="comment">#define MX28_PAD_I2C0_SDA__TIMROT_ROTARYB		0x3191</span></div><div class="line"><span class="comment">#define MX28_PAD_I2C0_SCL__DUART_RX			0x3182</span></div><div class="line"><span class="comment">#define MX28_PAD_I2C0_SDA__DUART_TX			0x3192</span></div><div class="line"><span class="comment">#define MX28_PAD_I2C0_SCL__GPIO_3_24			0x3183</span></div><div class="line"><span class="comment">#define MX28_PAD_I2C0_SDA__GPIO_3_25			0x3193</span></div></pre></td></tr></table></figure>
<p><img src="/imgs/imx28evk-dma_apbx.png" alt="imx28evk-dma_apbx"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$ cat arch/arm/boot/dts/imx28.dtsi</div><div class="line">[...]</div><div class="line">dma_apbx: dma-apbx@80024000 &#123;</div><div class="line">				compatible = <span class="string">"fsl,imx28-dma-apbx"</span>;</div><div class="line">				reg = &lt;0x80024000 0x2000&gt;;</div><div class="line">				interrupts = &lt;78 79 66 0</div><div class="line">					      80 81 68 69</div><div class="line">					      70 71 72 73</div><div class="line">					      74 75 76 77&gt;;</div><div class="line">				interrupt-names = <span class="string">"auart4-rx"</span>, <span class="string">"auart4-tx"</span>, <span class="string">"spdif-tx"</span>, <span class="string">"empty"</span>,</div><div class="line">						  <span class="string">"saif0"</span>, <span class="string">"saif1"</span>, <span class="string">"i2c0"</span>, <span class="string">"i2c1"</span>,</div><div class="line">						  <span class="string">"auart0-rx"</span>, <span class="string">"auart0-tx"</span>, <span class="string">"auart1-rx"</span>, <span class="string">"auart1-tx"</span>,</div><div class="line">						  <span class="string">"auart2-rx"</span>, <span class="string">"auart2-tx"</span>, <span class="string">"auart3-rx"</span>, <span class="string">"auart3-tx"</span>;</div><div class="line">				<span class="comment">#dma-cells = &lt;1&gt;;</span></div><div class="line">				dma-channels = &lt;16&gt;;</div><div class="line">				clocks = &lt;&amp;clks 26&gt;;</div><div class="line">			&#125;;</div><div class="line"></div><div class="line">[...]</div></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">~$ <span class="built_in">cd</span> ../imx28evk-kernel &amp;&amp;  make ARCH=arm CROSS_COMPILE=arm-none-eabi- zImage modules</div><div class="line">  GEN     ./Makefile</div><div class="line">scripts/kconfig/conf  --silentoldconfig Kconfig</div><div class="line">  SYSHDR  arch/arm/include/generated/uapi/asm/unistd-common.h</div><div class="line">  SYSHDR  arch/arm/include/generated/uapi/asm/unistd-oabi.h</div><div class="line">  SYSHDR  arch/arm/include/generated/uapi/asm/unistd-eabi.h</div><div class="line">  CHK     include/config/kernel.release</div><div class="line">  [...]</div><div class="line"></div><div class="line">~$ make ARCH=arm CROSS_COMPILE=arm-none-eabi- imx28-evk.dtb</div><div class="line">~$ cat arch/arm/boot/zImage arch/arm/boot/dts/imx28-evk.dtb &gt; zImage_dtb</div><div class="line">  // 如果内核中有模块编译就使用下面这命令把它安装到根文件系统目录下,　make INSTALL_HDR_PATH=/nfsroot/rootfs headers_install 安装内核头文件在这里不需要,只是做一个记录.</div><div class="line"><span class="comment"># make INSTALL_MOD_PATH=/nfsroot/rootfs/ modules_install</span></div><div class="line">  INSTALL crypto/echainiv.ko</div><div class="line">  INSTALL drivers/crypto/mxs-dcp.ko</div><div class="line">  INSTALL drivers/media/usb/gspca/gspca_main.ko</div><div class="line">  DEPMOD  4.14.51_lcybuild-20180706-1017</div><div class="line"><span class="comment"># cd /nfsroot/rootfs/lib/modules &amp;&amp;   tree</span></div><div class="line">.</div><div class="line">└── 4.14.51_lcybuild-20180706-1017</div><div class="line">    ├── build -&gt; /fullpath/kernel-imx28evk-buildroot-toolchain</div><div class="line">    ├── kernel</div><div class="line">    │   ├── crypto</div><div class="line">    │   │   └── echainiv.ko</div><div class="line">    │   └── drivers</div><div class="line">    │       ├── crypto</div><div class="line">    │       │   └── mxs-dcp.ko</div><div class="line">    │       └── media</div><div class="line">    │           └── usb</div><div class="line">    │               └── gspca</div><div class="line">    │                   └── gspca_main.ko</div><div class="line">    ├── modules.alias</div><div class="line">    ├── modules.alias.bin</div><div class="line">    ├── modules.builtin</div><div class="line">    ├── modules.builtin.bin</div><div class="line">    ├── modules.dep</div><div class="line">    ├── modules.dep.bin</div><div class="line">    ├── modules.devname</div><div class="line">    ├── modules.order</div><div class="line">    ├── modules.softdep</div><div class="line">    ├── modules.symbols</div><div class="line">    ├── modules.symbols.bin</div><div class="line">    └── <span class="built_in">source</span> -&gt; /fullpath/linux-4.14.51</div></pre></td></tr></table></figure>
<h2 id="mkimage-生成-uImage"><a href="#mkimage-生成-uImage" class="headerlink" title="mkimage 生成 uImage"></a>mkimage 生成 uImage</h2><ul>
<li>如果要用到<code>uImage</code>文件,用下面这条命令转换出来.注意<strong>LOADADDR</strong>是变量,不同开发板定义是不一样的.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mkimage -A arm -O linux -T kernel -C none <span class="_">-a</span> 0x40008000 <span class="_">-e</span> 0x40008000 -n <span class="string">"Linux-4.13.11"</span> <span class="_">-d</span> arch/arm/boot/zImage uImage</div><div class="line">Image Name:   Linux-4.13.11</div><div class="line">Created:      Fri Jun 22 12:03:38 2018</div><div class="line">Image Type:   ARM Linux Kernel Image (uncompressed)</div><div class="line">Data Size:    4280112 Bytes = 4179.80 kB = 4.08 MB</div><div class="line">Load Address: 40008000</div><div class="line">Entry Point:  40008000</div></pre></td></tr></table></figure>
<h2 id="测试-I2C-功能"><a href="#测试-I2C-功能" class="headerlink" title="测试 I2C 功能"></a>测试 I2C 功能</h2><ul>
<li>霍尼韦尔 HMC5883L 接线</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">iMX280A				HMC5883L</div><div class="line"></div><div class="line">SCL1	&lt;---&gt;   SCL</div><div class="line">SDA1	&lt;---&gt;   SDA</div><div class="line">GND	&lt;---&gt;   GND</div><div class="line">3.3v	&lt;---&gt;   3V3</div></pre></td></tr></table></figure>
<ul>
<li>HMC5883L 规格书</li>
</ul>
<p><img src="/imgs/hmc5883l.png" alt="hmc5883l"></p>
<ul>
<li>进入 iMX280A 输入下面命令检测设备.并 dump 传感器数值</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># i2cdetect -r -y 1</span></div><div class="line">     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f</div><div class="line">00:          -- -- -- -- -- -- -- -- -- -- -- -- --</div><div class="line">10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- 1e --</div><div class="line">20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --</div><div class="line">30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --</div><div class="line">40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --</div><div class="line">50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --</div><div class="line">60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --</div><div class="line">70: -- -- -- -- -- -- -- --</div><div class="line"><span class="comment"># i2cdump  -y 1 0x1e w</span></div><div class="line">     0,8  1,9  2,a  3,b  4,c  5,d  6,e  7,f</div><div class="line">00: 2010 0320 0003 1900 0119 e101 ffe1 10ff</div><div class="line">08: 0010 4803 3448 3334 1033 0000 3c00 003c</div><div class="line">10: 0000 0000 0000 0000 0000 0000 0000 0000</div><div class="line">18: 0000 0000 a500 10a5 0710 e807 10e8 0010</div><div class="line">20: 0000 0000 0000 0000 0000 0000 0000 1000</div><div class="line">28: 0010 0000 0000 0000 0000 0000 0000 0000</div><div class="line">30: 0000 0000 1400 8314 6683 5466 0054 a000</div><div class="line">[....]</div><div class="line">80: 2010 0320 0003 1900 0119 e101 ffe1 10ff</div><div class="line">88: 0010 4803 3448 3334 1033 0000 3c00 003c</div><div class="line">90: 0000 0000 0000 0000 0000 0000 0000 0000</div><div class="line">98: 0000 0000 a500 10a5 0710 e807 10e8 0010</div><div class="line">a0: 0000 0000 0000 0000 0000 0000 0000 1000</div><div class="line">a8: 0010 0000 0000 0000 0000 0000 0000 0000</div><div class="line">b0: 0000 0000 1400 8314 6683 5466 0054 a000</div><div class="line">b8: 00a0 0700 0007 0000 0000 0000 0000 0000</div><div class="line">[.....]</div></pre></td></tr></table></figure>
<h2 id="SPI-测试"><a href="#SPI-测试" class="headerlink" title="SPI 测试"></a>SPI 测试</h2><ul>
<li>SPI 用户空间编程,需要在内核中要开启<code>CONFIG_SPI_SPIDEV=y</code>.</li>
<li>还需要在内核的源码中添加一项<code>{ .compatible = &quot;spidev&quot; }</code>,不然会出现<strong><code>spidev spi1.0: buggy DT: spidev listed directly in DT</code></strong>的错误.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$cat</span> ../linux-4.14.51/drivers/spi/spidev.c</div><div class="line">[....]</div><div class="line"><span class="comment">#ifdef CONFIG_OF</span></div><div class="line">static const struct of_device_id spidev_dt_ids[] = &#123;</div><div class="line">	&#123; .compatible = <span class="string">"rohm,dh2228fv"</span> &#125;,</div><div class="line">	&#123; .compatible = <span class="string">"lineartechnology,ltc2488"</span> &#125;,</div><div class="line">	&#123; .compatible = <span class="string">"ge,achc"</span> &#125;,</div><div class="line">	&#123; .compatible = <span class="string">"semtech,sx1301"</span> &#125;,</div><div class="line">	&#123; .compatible = <span class="string">"spidev"</span> &#125;,</div><div class="line">	&#123;&#125;,</div><div class="line">&#125;;</div><div class="line">[...]</div></pre></td></tr></table></figure>
<h2 id="下载测试代码"><a href="#下载测试代码" class="headerlink" title="下载测试代码"></a>下载测试代码</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> https://github.com/rm-hull/spidev-test</div><div class="line">$ <span class="built_in">cd</span> spidev-test</div><div class="line">$ gcc spidev_test.c -o spidev_test</div><div class="line"><span class="comment">#./spidev_test</span></div><div class="line">spi mode: 0</div><div class="line">bits per word: 8</div><div class="line">max speed: 500000 Hz (500 KHz)</div><div class="line">can<span class="string">'t send spi message: Invalid argument</span></div><div class="line">Aborted (core dumped)</div></pre></td></tr></table></figure>
<ul>
<li>MMC/SD 卡的分区类型说明</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">* <span class="keyword">for</span> a card connected via a PCI card reader</div><div class="line">DISK=/dev/mmcblk0</div><div class="line">* <span class="keyword">for</span> a card connected via a USB card reader,</div><div class="line">DISK=/dev/sdX</div></pre></td></tr></table></figure>
<h1 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h1><h2 id="Root-挂载错误"><a href="#Root-挂载错误" class="headerlink" title="Root 挂载错误"></a>Root 挂载错误</h2><ul>
<li>下面这个错误的可能性会很多,我这边使用<a href="https://releases.linaro.org/components/toolchain/binaries/4.9-2017.01/arm-linux-gnueabi" target="_blank" rel="external">Linaro Toolchain</a>工具链生成的<strong>rootfs.tar</strong>解压到 NFS 服务器里,就会出现下面错误,后来换成<code>BuildRoot</code>编译的工具就没有问题.</li>
<li>如果是 UBIFS 文件系统挂载一定要指定<code>mtdparts</code>给 u-boot 的<code>bootargs</code>变量里面,不然找不到分区信息,就无法挂载.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[    5.625458] Kernel panic - not syncing: Attempted to <span class="built_in">kill</span> init! exitcode=0x00000004</div><div class="line">[    5.625458]</div><div class="line">[    5.634639] CPU: 0 PID: 1 Comm: init Not tainted 4.14.51_lcybuild-20180702-0852 <span class="comment">#3</span></div><div class="line">[    5.642215] Hardware name: Freescale MXS (Device Tree)</div><div class="line">[    5.647434] [&lt;c00157bc&gt;] (unwind_backtrace) from [&lt;c0013644&gt;] (show_stack+0x10/0x14)</div><div class="line">[    5.655216] [&lt;c0013644&gt;] (show_stack) from [&lt;c001d580&gt;] (panic+0xb8/0x234)</div><div class="line">[    5.662120] [&lt;c001d580&gt;] (panic) from [&lt;c001eecc&gt;] (do_exit+0x9c8/0x9<span class="built_in">fc</span>)</div><div class="line">[    5.668843] [&lt;c001eecc&gt;] (do_exit) from [&lt;c001fa28&gt;] (do_group_exit+0x3c/0xb4)</div><div class="line">[    5.676102] [&lt;c001fa28&gt;] (do_group_exit) from [&lt;c002846c&gt;] (get_signal+0x264/0x58c)</div><div class="line">[    5.683792] [&lt;c002846c&gt;] (get_signal) from [&lt;c0012aa8&gt;] (do_signal+0xb8/0x42c)</div><div class="line">[    5.691043] [&lt;c0012aa8&gt;] (do_signal) from [&lt;c0012fdc&gt;] (do_work_pending+0xb0/0xc0)</div><div class="line">[    5.698640] [&lt;c0012fdc&gt;] (do_work_pending) from [&lt;c0010148&gt;] (slow_work_pending+0xc/0x20)</div><div class="line">[    5.706839] ---[ end Kernel panic - not syncing: Attempted to <span class="built_in">kill</span> init! exitcode=0x00000004</div><div class="line">[    5.706839]</div></pre></td></tr></table></figure>
<hr>
<h2 id="u-boot-编译错误"><a href="#u-boot-编译错误" class="headerlink" title="u-boot 编译错误"></a>u-boot 编译错误</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">gcc -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -include /home/michael/3TB-DISK/imx28-test/u-boot-2014.01/include/libfdt_env.h -idirafter /home/michael/3TB-DISK/imx28-test/u-boot-2014.01/include -idirafter /home/michael/3TB-DISK/imx28-test/u-boot-2014.01/arch/arm/include -idirafter /home/michael/3TB-DISK/imx28-test/u-boot-2014.01/include -I /home/michael/3TB-DISK/imx28-test/u-boot-2014.01/lib/libfdt -I /home/michael/3TB-DISK/imx28-test/u-boot-2014.01/tools -DCONFIG_SYS_TEXT_BASE=0x40000100 -DUSE_HOSTCC -D__KERNEL_STRICT_NAMES -D_GNU_SOURCE -DCONFIG_MXS   -o mxsimage.o mxsimage.c -c</div><div class="line">mxsimage.c:146:19: error: field ‘cipher_ctx’ has incomplete <span class="built_in">type</span></div><div class="line">  EVP_CIPHER_CTX   cipher_ctx;</div><div class="line">                   ^~~~~~~~~~</div><div class="line">mxsimage.c:147:15: error: field ‘md_ctx’ has incomplete <span class="built_in">type</span></div><div class="line">  EVP_MD_CTX   md_ctx;</div><div class="line">               ^~~~~~</div><div class="line">mxsimage.c: In <span class="keyword">function</span> ‘sb_postfill_image_header’:</div><div class="line">mxsimage.c:1345:13: error: storage size of ‘md_ctx’ isn’t known</div><div class="line">  EVP_MD_CTX md_ctx;</div><div class="line">             ^~~~~~</div><div class="line">mxsimage.c:1345:13: warning: unused variable ‘md_ctx’ [-Wunused-variable]</div><div class="line">mxsimage.c: In <span class="keyword">function</span> ‘sb_verify_image_header’:</div><div class="line">mxsimage.c:1638:13: error: storage size of ‘md_ctx’ isn’t known</div><div class="line">  EVP_MD_CTX md_ctx;</div><div class="line">             ^~~~~~</div><div class="line">mxsimage.c:1638:13: warning: unused variable ‘md_ctx’ [-Wunused-variable]</div></pre></td></tr></table></figure>
<ul>
<li>一些旧的版本编译时会出现上述错误,需修改的是把它改成指针声明.可以用这个<a href="/imgs/files/mxsimage.patch">patch</a>文件解决.</li>
</ul>
<hr>
<h2 id="U-boot-加载内核错误"><a href="#U-boot-加载内核错误" class="headerlink" title="U-boot 加载内核错误"></a>U-boot 加载内核错误</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> Booting kernel from Legacy Image at 42000000 ...</div><div class="line">   Image Name:   Linux-4.13.11</div><div class="line">   Image Type:   ARM Linux Kernel Image (uncompressed)</div><div class="line">   Data Size:    4280112 Bytes =  4.1 MB</div><div class="line">   Load Address: 40008000</div><div class="line">   Entry Point:  40008000</div><div class="line">   Verifying Checksum ... Bad Data CRC</div><div class="line">ERROR: can<span class="string">'t get kernel image!</span></div></pre></td></tr></table></figure>
<ul>
<li>上面是因为启动的 uImage 在的体积大于 uboot 中的变里<code>kernelsize</code>所设定的值,设置如下:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">U-Boot &gt;setenv kernelsize 0x415000</div><div class="line">U-Boot &gt;save</div><div class="line">U-Boot &gt;reset</div></pre></td></tr></table></figure>
<hr>
<h2 id="编译环境错误"><a href="#编译环境错误" class="headerlink" title="编译环境错误"></a>编译环境错误</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">You have PERL_MM_OPT defined because Perl <span class="built_in">local</span>::lib</div><div class="line">is installed on your system. Please <span class="built_in">unset</span> this variable</div><div class="line">before starting Buildroot, otherwise the compilation of</div><div class="line">Perl related packages will fail</div><div class="line">support/dependencies/dependencies.mk:25: recipe <span class="keyword">for</span> target <span class="string">'core-dependencies'</span> failed</div><div class="line">make[1]: *** [core-dependencies] Error 1</div><div class="line">Makefile:16: recipe <span class="keyword">for</span> target <span class="string">'_all'</span> failed</div><div class="line">make: *** [_all] Error 2</div></pre></td></tr></table></figure>
<ul>
<li>如果编译时出现上述错误,要运行下面的脚本.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~$ <span class="built_in">eval</span> $(perl -M<span class="built_in">local</span>::lib=--deactivate-all)</div></pre></td></tr></table></figure>
<hr>
<h2 id="BusyBox-编译错误"><a href="#BusyBox-编译错误" class="headerlink" title="BusyBox 编译错误"></a>BusyBox 编译错误</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/miscutils/nandwrite.c: In <span class="keyword">function</span> <span class="string">'nandwrite_main'</span>:</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/miscutils/nandwrite.c:152: error: <span class="string">'MTD_FILE_MODE_RAW'</span> undeclared (first use <span class="keyword">in</span> this <span class="keyword">function</span>)</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/miscutils/nandwrite.c:152: error: (Each undeclared identifier is reported only once</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/miscutils/nandwrite.c:152: error: <span class="keyword">for</span> each <span class="keyword">function</span> it appears in.)</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/scripts/Makefile.build:197: recipe <span class="keyword">for</span> target <span class="string">'miscutils/nandwrite.o'</span> failed</div><div class="line">make[3]: *** [miscutils/nandwrite.o] Error 1</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/Makefile:742: recipe <span class="keyword">for</span> target <span class="string">'miscutils'</span> failed</div></pre></td></tr></table></figure>
<ul>
<li>复制/usr/include/mtd/mtd-abi.h 到 busybox/include 下面,再要 nandwrite.c 里加上<code>#include &quot;mtd-abi.h&quot;</code></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/util-linux/blkdiscard.c: In <span class="keyword">function</span> <span class="string">'blkdiscard_main'</span>:</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/util-linux/blkdiscard.c:71: error: <span class="string">'BLKSECDISCARD'</span> undeclared (first use <span class="keyword">in</span> this <span class="keyword">function</span>)</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/util-linux/blkdiscard.c:71: error: (Each undeclared identifier is reported only once</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/util-linux/blkdiscard.c:71: error: <span class="keyword">for</span> each <span class="keyword">function</span> it appears in.)</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/scripts/Makefile.build:197: recipe <span class="keyword">for</span> target <span class="string">'util-linux/blkdiscard.o'</span> failed</div><div class="line">make[3]: *** [util-linux/blkdiscard.o] Error 1</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/Makefile:742: recipe <span class="keyword">for</span> target <span class="string">'util-linux'</span> failed</div></pre></td></tr></table></figure>
<ul>
<li>可以按照上述方法添加头文件解决,它位于/usr/include/linux/fs.h 中,也可以不编译这个模块 <code>Linux System Utilities -&gt;blkidiscard</code>就不会报错了.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">coreutils/lib.a(mktemp.o): In <span class="keyword">function</span> `mktemp_main<span class="string">':</span></div><div class="line">mktemp.c:(.text.mktemp_main+0x98): warning: the use of `mktemp\' is dangerous, better use `mkstemp\<span class="string">'</span></div><div class="line">util-linux/lib.a(nsenter.o): In function `nsenter_main\':</div><div class="line">nsenter.c:(.text.nsenter_main+0x1b0): undefined reference to `setns\<span class="string">'</span></div><div class="line">coreutils/lib.a(sync.o): In function `sync_main\':</div><div class="line">sync.c:(.text.sync_main+0x80): undefined reference to `syncfs\<span class="string">'</span></div><div class="line">collect2: ld returned 1 exit status</div><div class="line">Note: if build needs additional libraries, put them in CONFIG_EXTRA_LDLIBS.</div><div class="line">Example: CONFIG_EXTRA_LDLIBS="pthread dl tirpc audit pam"</div><div class="line">/home/michael/3TB-DISK/imx28-test/MX283Linux/busybox-1.27.2/Makefile:717: recipe for target 'busybox_unstripped<span class="string">' failed</span></div><div class="line">make[2]: *** [busybox_unstripped] Error 1</div><div class="line">Makefile:112: recipe for target '_all<span class="string">' failed</span></div><div class="line">make[1]: *** [_all] Error 2</div><div class="line">Makefile:14: recipe for target 'all<span class="string">' failed</span></div><div class="line">make: *** [all] Error 2</div></pre></td></tr></table></figure>
<ul>
<li>不要选择下面这两个模块</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Coreutils-&gt;sync</div><div class="line">Linux System Utilities-&gt;nsenter</div></pre></td></tr></table></figure>
<hr>
<h3 id="谢谢支持"><a href="#谢谢支持" class="headerlink" title="谢谢支持"></a>谢谢支持</h3><ul>
<li>微信二维码:</li>
<li><a href="mailto:yjdwbj@gmail.com" target="_blank" rel="external">联系作者</a></li>
</ul>
<p><img src="/imgs/mm_reward_qrcode_1525013906055.png" width="40%" height="40%" align="center/"></p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/嵌入式-imx28-evk-Linux/" rel="tag"># 嵌入式,imx28-evk,Linux</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/19/Linux下使用JLink与OpenOCD配合嵌入式开发/" rel="next" title="Linux下使用JLink与OpenOCD配合嵌入式开发">
                <i class="fa fa-chevron-left"></i> Linux下使用JLink与OpenOCD配合嵌入式开发
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/16/构建SpringBoot基础项目/" rel="prev" title="构建SpringBoot基础项目">
                构建SpringBoot基础项目 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars0.githubusercontent.com/u/321919?s=400&u=67298bd9fc3b622eaf93a6cc511a24ac878e86db&v=4"
                alt="yjdwbj" />
            
              <p class="site-author-name" itemprop="name">yjdwbj</p>
              <p class="site-description motion-element" itemprop="description">最是人间留不住,朱颜辞镜花辞树</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">35</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">分类</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">30</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/yjdwbj" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:yjdwbj@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://plus.google.com/yjdwbj" target="_blank" title="Google"><i class="fa fa-fw fa-google"></i>Google</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#U-Boot-2017-11"><span class="nav-number">1.</span> <span class="nav-text">U-Boot 2017.11</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tftpd-hpa-安装"><span class="nav-number">2.</span> <span class="nav-text">tftpd-hpa 安装</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#NFS-Server-配置"><span class="nav-number">3.</span> <span class="nav-text">NFS Server 配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#U-boot-使用"><span class="nav-number">4.</span> <span class="nav-text">U-boot 使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#公共变量"><span class="nav-number">4.1.</span> <span class="nav-text">公共变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NFS-ROOTFS"><span class="nav-number">4.2.</span> <span class="nav-text">NFS ROOTFS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MMC-ROOTFS"><span class="nav-number">4.3.</span> <span class="nav-text">MMC ROOTFS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#USB-Stack-ROOTFS"><span class="nav-number">4.4.</span> <span class="nav-text">USB Stack ROOTFS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UBIFS-ROOTFS"><span class="nav-number">4.5.</span> <span class="nav-text">UBIFS ROOTFS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#通过网络更新-kernel"><span class="nav-number">4.6.</span> <span class="nav-text">通过网络更新 kernel</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#通过网络更新-nand-文件系统"><span class="nav-number">4.7.</span> <span class="nav-text">通过网络更新 nand 文件系统</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#imx-bootlets"><span class="nav-number">5.</span> <span class="nav-text">imx-bootlets</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#IMX280A-USB-烧写模式"><span class="nav-number">5.1.</span> <span class="nav-text">IMX280A USB 烧写模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IMX280-TF-烧写模式"><span class="nav-number">5.2.</span> <span class="nav-text">IMX280 TF 烧写模式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BuildRoot-文件系统"><span class="nav-number">6.</span> <span class="nav-text">BuildRoot 文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#BusyBox-配置静态编译"><span class="nav-number">6.1.</span> <span class="nav-text">BusyBox 配置静态编译</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-Kernel-配置"><span class="nav-number">6.2.</span> <span class="nav-text">Linux Kernel 配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编译"><span class="nav-number">6.3.</span> <span class="nav-text">编译</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UBIFS-文件系统制作"><span class="nav-number">6.4.</span> <span class="nav-text">UBIFS 文件系统制作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UBIFS-文件烧写"><span class="nav-number">6.5.</span> <span class="nav-text">UBIFS 文件烧写</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux-内核编译"><span class="nav-number">7.</span> <span class="nav-text">Linux 内核编译</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-下载及配置选项"><span class="nav-number">7.1.</span> <span class="nav-text">Linux 下载及配置选项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编译内核用设备树"><span class="nav-number">7.2.</span> <span class="nav-text">编译内核用设备树</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设备树相关"><span class="nav-number">7.3.</span> <span class="nav-text">设备树相关</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mkimage-生成-uImage"><span class="nav-number">7.4.</span> <span class="nav-text">mkimage 生成 uImage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试-I2C-功能"><span class="nav-number">7.5.</span> <span class="nav-text">测试 I2C 功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SPI-测试"><span class="nav-number">7.6.</span> <span class="nav-text">SPI 测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#下载测试代码"><span class="nav-number">7.7.</span> <span class="nav-text">下载测试代码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#错误处理"><span class="nav-number">8.</span> <span class="nav-text">错误处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Root-挂载错误"><span class="nav-number">8.1.</span> <span class="nav-text">Root 挂载错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#u-boot-编译错误"><span class="nav-number">8.2.</span> <span class="nav-text">u-boot 编译错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#U-boot-加载内核错误"><span class="nav-number">8.3.</span> <span class="nav-text">U-boot 加载内核错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编译环境错误"><span class="nav-number">8.4.</span> <span class="nav-text">编译环境错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BusyBox-编译错误"><span class="nav-number">8.5.</span> <span class="nav-text">BusyBox 编译错误</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#谢谢支持"><span class="nav-number">8.5.1.</span> <span class="nav-text">谢谢支持</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yjdwbj</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.2.2</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.2.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.2.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.2.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.2.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.2.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
