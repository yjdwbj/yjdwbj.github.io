<!DOCTYPE html>






  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.2.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.2.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="PulseAudio 设置与应用
安装如下包,具体安装可参考这里&amp;gt;)

1234567891011~$ dpkg -l | grep &quot;pulseaudio&quot;ii  gstreamer1.0-pulseaudio:amd64                     1.10.4-1                                    amd64        GStream">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 使用的一些常见问题,不定期更新.">
<meta property="og:url" content="http://yoursite.com/2016/08/26/使用的一些常见问题-不定期更新/index.html">
<meta property="og:site_name" content="Sunrise 博客">
<meta property="og:description" content="PulseAudio 设置与应用
安装如下包,具体安装可参考这里&amp;gt;)

1234567891011~$ dpkg -l | grep &quot;pulseaudio&quot;ii  gstreamer1.0-pulseaudio:amd64                     1.10.4-1                                    amd64        GStream">
<meta property="og:image" content="http://yoursite.com/imgs/ovsbr0.png">
<meta property="og:image" content="http://yoursite.com/imgs/mm_reward_qrcode_1525013906055.png">
<meta property="og:updated_time" content="2018-06-03T14:27:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux 使用的一些常见问题,不定期更新.">
<meta name="twitter:description" content="PulseAudio 设置与应用
安装如下包,具体安装可参考这里&amp;gt;)

1234567891011~$ dpkg -l | grep &quot;pulseaudio&quot;ii  gstreamer1.0-pulseaudio:amd64                     1.10.4-1                                    amd64        GStream">
<meta name="twitter:image" content="http://yoursite.com/imgs/ovsbr0.png">






  <link rel="canonical" href="http://yoursite.com/2016/08/26/使用的一些常见问题-不定期更新/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Linux 使用的一些常见问题,不定期更新. | Sunrise 博客</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-78826582-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-78826582-1');
</script>






  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sunrise 博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/08/26/使用的一些常见问题-不定期更新/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yjdwbj">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/321919?s=400&u=67298bd9fc3b622eaf93a6cc511a24ac878e86db&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sunrise 博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Linux 使用的一些常见问题,不定期更新.
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-26 00:00:00" itemprop="dateCreated datePublished" datetime="2016-08-26T00:00:00+08:00">2016-08-26</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-06-03 22:27:00" itemprop="dateModified" datetime="2018-06-03T22:27:00+08:00">2018-06-03</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/笔记/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="PulseAudio-设置与应用"><a href="#PulseAudio-设置与应用" class="headerlink" title="PulseAudio 设置与应用"></a>PulseAudio 设置与应用</h1><ul>
<li>安装如下包,具体安装可参考<a href="https://wiki.archlinux.org/index.php/PulseAudio_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87" target="_blank" rel="external">这里</a>&gt;)</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">~$ dpkg <span class="_">-l</span> | grep <span class="string">"pulseaudio"</span></div><div class="line">ii  gstreamer1.0-pulseaudio:amd64                     1.10.4-1                                    amd64        GStreamer plugin <span class="keyword">for</span> PulseAudio</div><div class="line">ii  pulseaudio                                        10.0-1+deb9u1                               amd64        PulseAudio sound server</div><div class="line">ii  pulseaudio-dlna                                   0.5.2-1                                     all          Stream audio to DLNA devices and Chromecasts</div><div class="line">ii  pulseaudio-module-bluetooth                       10.0-1+deb9u1                               amd64        Bluetooth module <span class="keyword">for</span> PulseAudio sound server</div><div class="line">ii  pulseaudio-module-gconf                           10.0-1+deb9u1                               amd64        GConf module <span class="keyword">for</span> PulseAudio sound server</div><div class="line">ii  pulseaudio-module-jack                            10.0-1+deb9u1                               amd64        jackd modules <span class="keyword">for</span> PulseAudio sound server</div><div class="line">ii  pulseaudio-utils                                  10.0-1+deb9u1                               amd64        Command line tools <span class="keyword">for</span> the PulseAudio sound server</div><div class="line">ii  alsa-tools                                        1.1.3-1                                     amd64        Console based ALSA utilities <span class="keyword">for</span> specific hardware</div><div class="line">ii  alsa-utils                                        1.1.3-1                                     amd64        Utilities <span class="keyword">for</span> configuring and using ALSA</div><div class="line">ii  alsamixergui                                      0.9.0rc2-1-10                               amd64        graphical soundcard mixer <span class="keyword">for</span> ALSA soundcard driver</div></pre></td></tr></table></figure>
<ul>
<li>添加这一行<strong>load-module module-alsa-sink device=hw:1,0
</strong>到<code>/etc/pulse/default.pa</code>里面.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">~$ cat /etc/pulse/daemon.conf</div><div class="line">daemonize = yes</div><div class="line">allow-module-loading = yes</div><div class="line">system-instance = yes</div></pre></td></tr></table></figure>
<ul>
<li>把下面的输出转到 PulseAudio.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">~$ cat ~/.asoundrc</div><div class="line">pcm.pulse &#123;</div><div class="line">        <span class="built_in">type</span> pulse</div><div class="line">&#125;</div><div class="line">ctl.pulse &#123;</div><div class="line">        <span class="built_in">type</span> pulse</div><div class="line">&#125;</div><div class="line">pcm.!default &#123;</div><div class="line">        <span class="built_in">type</span> pulse</div><div class="line">&#125;</div><div class="line">ctl.!default &#123;</div><div class="line">        <span class="built_in">type</span> pulse</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>启动,停止 PulseAudio</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">~$ pulseaudio --kill</div><div class="line">~$ pulseaudio --start</div><div class="line"></div><div class="line">~$ aplay <span class="_">-l</span></div><div class="line">**** List of PLAYBACK Hardware Devices ****</div><div class="line">card 0: HDMI [HDA ATI HDMI], device 3: HDMI 0 [HDMI 0]</div><div class="line">  Subdevices: 1/1</div><div class="line">  Subdevice <span class="comment">#0: subdevice #0</span></div><div class="line">card 1: Generic [HD-Audio Generic], device 0: ALC887-VD Analog [ALC887-VD Analog]</div><div class="line">  Subdevices: 0/1</div><div class="line">  Subdevice <span class="comment">#0: subdevice #0</span></div><div class="line">card 1: Generic [HD-Audio Generic], device 1: ALC887-VD Digital [ALC887-VD Digital]</div><div class="line">  Subdevices: 1/1</div><div class="line">  Subdevice <span class="comment">#0: subdevice #0</span></div></pre></td></tr></table></figure>
<ul>
<li>如果出现任何问题,仔细查看系统日志解决.</li>
</ul>
<hr>
<h1 id="minicom-使用"><a href="#minicom-使用" class="headerlink" title="minicom 使用"></a>minicom 使用</h1><ul>
<li><p>Linux 下的超级终端工具<code>minicom</code> 是命令行的工具不像 windows 下的串口工具那么直观,但是使用习惯了就一样.</p>
</li>
<li><p>初次使用 minicom 除了一些串口的常规设置,跟其它串口工具都是一样的.</p>
</li>
<li>在当前 Shell 下输入 <code>minicom -s</code> 会出现如下界面:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">+-----[configuration]------+</div><div class="line">| Filenames and paths      |</div><div class="line">| File transfer protocols  |</div><div class="line">| Serial port setup        |</div><div class="line">| Modem and dialing        |</div><div class="line">| Screen and keyboard      |</div><div class="line">| Save setup as dfl        |</div><div class="line">| Save setup as..          |</div><div class="line">| Exit                     |</div><div class="line">| Exit from Minicom        |</div><div class="line">+--------------------------+</div></pre></td></tr></table></figure>
<ul>
<li>选择<code>Serial port setup</code> 设置串口参数:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">+-----------------------------------------------------------------------+</div><div class="line">| A -    Serial Device      : /dev/ttyUSB5                              |</div><div class="line">| B - Lockfile Location     : /var/lock                                 |</div><div class="line">| C -   Callin Program      :                                           |</div><div class="line">| D -  Callout Program      :                                           |</div><div class="line">| E -    Bps/Par/Bits       : 115200 8N1                                |</div><div class="line">| F - Hardware Flow Control : No                                        |</div><div class="line">| G - Software Flow Control : No                                        |</div><div class="line">|                                                                       |</div><div class="line">|    Change <span class="built_in">which</span> setting?                                              |</div><div class="line">+-----------------------------------------------------------------------+</div></pre></td></tr></table></figure>
<ul>
<li><p>设置完成回车返回到一个菜单.选择<code>Save setup as dfl</code> 保存退出.</p>
</li>
<li><p>我一般使用 minicom 的参数去连接.例如:</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~$  minicom -o -b 115200 -D /dev/ttyUSB5</div></pre></td></tr></table></figure>
<h2 id="AT-命令"><a href="#AT-命令" class="headerlink" title="AT 命令"></a>AT 命令</h2><ul>
<li>一般图形串口工具都有一项,发送新行或者<code>**newline**</code>这个选项.在连接一些硬件串口时发送 AT 命令时,这个是必选的.</li>
<li><p>但是在 minicom 就只能用组合快捷键来替换了.</p>
</li>
<li><p>在 minicom 里发送 AT 命令如:<code>AT+OK</code> 直接回车,它是不会有反应的,必须还要加一个<code>ctrl+j</code>,才能提交,这个问题也是困扰了我很久.</p>
</li>
</ul>
<h1 id="esptool-升级固件"><a href="#esptool-升级固件" class="headerlink" title="esptool 升级固件"></a>esptool 升级固件</h1><ul>
<li>参考链接:</li>
<li><a href="http://wiki.ai-thinker.com/doku.php/utils/esp_bin_download" target="_blank" rel="external">ESP8266 Tools</a></li>
<li><a href="https://github.com/esp8266/esp8266-wiki/wiki/Boot-Process#esp-boot-modes" target="_blank" rel="external">ESP8266 Wiki</a></li>
<li><a href="http://wiki.ai-thinker.com/doku.php/release/esp8266_sdk_release" target="_blank" rel="external">ESP8266 SDK</a></li>
<li><a href="http://cms.35g.tw/coding/%e4%bd%bf%e7%94%a8arduino%e6%9b%b4%e6%96%b0esp8266-firmware" target="_blank" rel="external">使用 Arduino 更新 ESP8266 firmware</a></li>
</ul>
<p>ESP-01 　为例.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">GPIO0 --&gt; GND</div><div class="line">GPIO2 --&gt; 3V3</div><div class="line">CH_PD --&gt; 3V3</div><div class="line">RST   --&gt; 3V3</div><div class="line">VCC   --&gt; 3V3</div><div class="line">GND   --&gt; GND</div><div class="line">TX    --&gt; UART(RX)</div><div class="line">RX    --&gt; UART(TX)</div></pre></td></tr></table></figure>
<ul>
<li><a href="https://github.com/themadinventor/esptool" target="_blank" rel="external">esptool 工具</a></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~$ esptool.py   -p /dev/ttyUSB5 write_flash --flash_mode dio --flash_size 8m 0x0 AiThinker_ESP8266_DIO_8M_8M_20160615_V1.5.4.bin</div></pre></td></tr></table></figure>
<ul>
<li>这个升级问题折腾了我很久,今天总算是升级成功.它们的文档很杂,图与板子上的名称又不全部对应.</li>
</ul>
<h1 id="转换-GBK-文本文件的问题"><a href="#转换-GBK-文本文件的问题" class="headerlink" title="转换 GBK 文本文件的问题"></a>转换 GBK 文本文件的问题</h1><ul>
<li>有时在 Linux 下打开 GBK 编码的文件会出现乱码,优其是一些在 window 下载打包的源码压缩包,源码文件全都是 GBK 编码.在 Linux 下用一些文本编辑器打开全是乱码,有些甚至连目录都是乱码.</li>
<li>下面记录一个 shell 脚本批量转换成 UTF8 格式的文件.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$ cat convert.sh</div><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">TMP_IFS=<span class="variable">$IFS</span></div><div class="line">IFS=$(<span class="built_in">echo</span> -en <span class="string">"\n\b"</span>)</div><div class="line"><span class="keyword">for</span> f <span class="keyword">in</span> `find . -type f`;<span class="keyword">do</span></div><div class="line">    org=$(file <span class="variable">$f</span>)</div><div class="line">    string=$(<span class="built_in">echo</span> <span class="variable">$org</span> | grep <span class="string">"ISO-8859"</span>) ;</div><div class="line">    <span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$string</span>"</span> ]; <span class="keyword">then</span></div><div class="line">        infile=$(<span class="built_in">echo</span> <span class="variable">$string</span> | awk -F<span class="string">':'</span> <span class="string">'&#123;print $1&#125;'</span>);</div><div class="line">        <span class="comment">#echo $infile</span></div><div class="line">        iconv <span class="_">-f</span> GBK -t UTF8 <span class="variable">$infile</span> &gt; 1;</div><div class="line">        mv 1 <span class="variable">$infile</span>;</div><div class="line">    <span class="keyword">fi</span> ;</div><div class="line"><span class="keyword">done</span></div><div class="line">IFS=<span class="variable">$TMP_IFS</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">TMP_IFS=<span class="variable">$IFS</span></div><div class="line">IFS=$(<span class="built_in">echo</span> -en <span class="string">"\n\b"</span>)</div><div class="line"></div><div class="line"><span class="keyword">for</span> f <span class="keyword">in</span> `find  . \( -iname <span class="string">"*.txt"</span> -o -iname <span class="string">"*.c"</span> -o -iname <span class="string">"*.h"</span> \)`;<span class="keyword">do</span></div><div class="line">    iconv <span class="_">-f</span> GBK -t UTF8 -c <span class="variable">$f</span> &gt; 1; mv 1 <span class="variable">$f</span>;</div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<ul>
<li>在转换文件时,有时候路径中会包含空格,如果不按照上面的方式设置<code>IFS</code>变量,脚本就会出错在有空格的地方分隔,认为是两个文件.上面这个脚本只是</li>
<li>一个很简单的处理当前目录下所有文件的转换.还可以把它写的更通用灵活.</li>
</ul>
<hr>
<h1 id="批量清除文件名中的特定字符串"><a href="#批量清除文件名中的特定字符串" class="headerlink" title="批量清除文件名中的特定字符串"></a>批量清除文件名中的特定字符串</h1><ul>
<li>有时从网站下载一些文件,资源经会把自已的名字或者网址加在文件名如: <code>电影名_[www.xxx.com].mkv</code>,这样的格式</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">TMP_IFS=<span class="variable">$IFS</span></div><div class="line">IFS=$(<span class="built_in">echo</span> -en <span class="string">"\n\b"</span>)</div><div class="line">sub1=<span class="string">"www\.xxx\.com"</span></div><div class="line">sub2=<span class="string">"www\.bbb\.com"</span></div><div class="line">sub3=<span class="string">"www\.ccc\.com"</span></div><div class="line"><span class="comment">#sub4="[(]www.ddd.com[)]"  # 例如:  fname-(www.ddd.com).pdf, sed -re "s/$sub4//g"</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 例如:匹配 538081 SCALA学习手册.pdf  556997 Scala函数式编.pdf 这样的文件名,删除前面的6个数字</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># reg='^([0-9]&#123;6&#125;)'</span></div><div class="line"><span class="comment"># for fname in `ls`;do</span></div><div class="line"><span class="comment">#	string=$(echo $fname)</span></div><div class="line"><span class="comment">#    if [[ $string =~ $reg ]];</span></div><div class="line"><span class="comment">#    then</span></div><div class="line"><span class="comment">#    	nstr=$(echo $string | sed -r "s/$&#123;reg&#125;//g")</span></div><div class="line"><span class="comment">#        echo $nstr</span></div><div class="line"><span class="comment">#        mv $fname $nstr</span></div><div class="line"><span class="comment">#    fi</span></div><div class="line"><span class="comment">#  done</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> fname <span class="keyword">in</span> `ls`;</div><div class="line"><span class="keyword">do</span></div><div class="line">	string=$(<span class="built_in">echo</span> <span class="variable">$fname</span>)</div><div class="line">	<span class="keyword">if</span> [[ <span class="variable">$string</span> = *<span class="variable">$&#123;sub1&#125;</span>* || <span class="variable">$string</span> = *<span class="variable">$&#123;sub2&#125;</span>* || <span class="variable">$string</span> = *<span class="variable">$&#123;sub3&#125;</span>*  || <span class="variable">$string</span> = *<span class="variable">$&#123;sub4&#125;</span>* ]];</div><div class="line">	<span class="keyword">then</span></div><div class="line">    	nstring=$(<span class="built_in">echo</span> <span class="variable">$s</span> | sed <span class="_">-e</span> <span class="string">"s/<span class="variable">$&#123;sub1&#125;</span>//g"</span> <span class="_">-e</span> <span class="string">"s/<span class="variable">$sub2</span>//g"</span> <span class="_">-e</span> <span class="string">"s/<span class="variable">$sub3</span>//g"</span> <span class="_">-e</span> <span class="string">"s/\(()\)//g/"</span> <span class="_">-e</span> <span class="string">"s/\[[]\]//g"</span> )</div><div class="line"></div><div class="line">        <span class="built_in">echo</span> <span class="variable">$nstring</span></div><div class="line">        mv <span class="variable">$f</span> <span class="variable">$nstring</span></div><div class="line">    <span class="keyword">fi</span></div><div class="line"><span class="keyword">done</span></div><div class="line"></div><div class="line">IFS=<span class="variable">$TMP_IFS</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="Linux-下-wireless-WPA-加密连接"><a href="#Linux-下-wireless-WPA-加密连接" class="headerlink" title="Linux 下 wireless WPA 加密连接"></a>Linux 下 wireless WPA 加密连接</h1><ul>
<li>确保安装了 wpasupplicant</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~$ sudo apt-get install wpasupplicant.</div></pre></td></tr></table></figure>
<ul>
<li><p>创建 /etc/wpa_supplicant.conf 或者从 <strong>/usr/share/doc/wpa_supplicant/examples/wpa_supplicant.conf.gz</strong> 复制</p>
</li>
<li><p>例如:</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">network=&#123;</div><div class="line">    ssid=<span class="string">"ssid_name"</span></div><div class="line">    psk=<span class="string">"password"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>手动命令行连接</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">~$ sudo wpa_supplicant -B -iwlan0 -c/etc/wpa_supplicant.conf -Dwext</div><div class="line">~$ sudo dhclient wlan0</div></pre></td></tr></table></figure>
<hr>
<h1 id="RTL8169-驱动"><a href="#RTL8169-驱动" class="headerlink" title="RTL8169 驱动"></a>RTL8169 驱动</h1><ul>
<li><a href="https://medium.com/@lgobinath/no-ethernet-connection-in-ubuntu-16-04-linux-mint-18-with-realtek-rtl8111-8168-8411-7ae2779dc9b8" target="_blank" rel="external">No Ethernet Connection in Ubuntu 16.04/Linux Mint 18 with Realtek RTL8111/8168/8411</a></li>
<li><a href="https://askubuntu.com/questions/864444/r8168-module-not-used-by-ethernet-controller" target="_blank" rel="external">r8168 module not used by ethernet controller</a></li>
<li><a href="https://github.com/fintecheando/r8168" target="_blank" rel="external">https://github.com/fintecheando/r8168</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line">#  查看本机硬件信息.</div><div class="line">~$ lshw -c network</div><div class="line">*-network UNCLAIMED</div><div class="line">       description: Ethernet interface</div><div class="line">       product: RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller</div><div class="line">       vendor: Realtek Semiconductor Co., Ltd.</div><div class="line">       physical id: 0</div><div class="line">       bus info: pci@0000:02:00.0</div><div class="line">       [....]</div><div class="line"></div><div class="line"></div><div class="line">~$ tree r8168-8.043.02/</div><div class="line">r8168-8.043.02/</div><div class="line">├── dkms.conf</div><div class="line">├── Makefile</div><div class="line">├── r8168_asf.c</div><div class="line">├── r8168_asf.h</div><div class="line">├── r8168_dash.h</div><div class="line">├── r8168_fiber.h</div><div class="line">├── r8168.h</div><div class="line">├── r8168_n.c</div><div class="line">├── r8168_realwow.h</div><div class="line">├── rtl_eeprom.c</div><div class="line">├── rtl_eeprom.h</div><div class="line">├── rtltool.c</div><div class="line">└── rtltool.h</div><div class="line"></div><div class="line">0 directories, 13 files</div><div class="line"></div><div class="line"># 查看系统已经添加了那些dkms包.</div><div class="line">~$ cd /usr/src/</div><div class="line">lcy@debian:/usr/src$ dkms status</div><div class="line">aufs, 4.9+20161219, 4.9.0-7-amd64, x86_64: installed</div><div class="line">aufs, 4.9+20161219, 4.9.0-8-amd64, x86_64: installed</div><div class="line">nvidia, 410.48, 4.14.77-20181016-lcy-amd64, x86_64: installed</div><div class="line">r8168, 8.043.02, 4.9.0-8-amd64, x86_64: installed</div><div class="line">rtl8812au, 4.3.8.12175.20140902+dfsg, 4.14.77-20181016-lcy-amd64, x86_64: installed</div><div class="line">rtl8812au, 4.3.8.12175.20140902+dfsg, 4.9.0-8-amd64, x86_64: installed</div><div class="line"></div><div class="line"># 使用dkms编译驱动包.</div><div class="line">~$ sudo dkms build -m r8168 -v 8.043.02</div><div class="line"></div><div class="line">Kernel preparation unnecessary for this kernel.  Skipping...</div><div class="line"></div><div class="line">Building module:</div><div class="line">cleaning build area...</div><div class="line">make -j6 KERNELRELEASE=4.14.77-20181016-lcy-amd64 -C /lib/modules/4.14.77-20181016-lcy-amd64/build M=/var/lib/dkms/r8168/8.043.02/build...(bad exit status: 2)</div><div class="line">Error! Bad return status for module build on kernel: 4.14.77-20181016-lcy-amd64 (x86_64)</div><div class="line">Consult /var/lib/dkms/r8168/8.043.02/build/make.log for more information.</div><div class="line"></div><div class="line"># 查看dkms编译为什么出错.</div><div class="line">~$ cat /var/lib/dkms/r8168/8.043.02/build/make.log</div><div class="line">DKMS make.log for r8168-8.043.02 for kernel 4.14.77-20181016-lcy-amd64 (x86_64)</div><div class="line">Sat Dec 29 16:31:32 CST 2018</div><div class="line">make: Entering directory &apos;/usr/src/linux-4.14.77&apos;</div><div class="line">  AR      /var/lib/dkms/r8168/8.043.02/build/built-in.o</div><div class="line">  CC [M]  /var/lib/dkms/r8168/8.043.02/build/r8168_n.o</div><div class="line">  CC [M]  /var/lib/dkms/r8168/8.043.02/build/r8168_asf.o</div><div class="line">  CC [M]  /var/lib/dkms/r8168/8.043.02/build/rtl_eeprom.o</div><div class="line">  CC [M]  /var/lib/dkms/r8168/8.043.02/build/rtltool.o</div><div class="line">/var/lib/dkms/r8168/8.043.02/build/r8168_n.c: In function ‘rtl8168_rx_interrupt’:</div><div class="line">/var/lib/dkms/r8168/8.043.02/build/r8168_n.c:25418:28: error: ‘struct net_device’ has no member named ‘last_rx’</div><div class="line">                         dev-&gt;last_rx = jiffies;</div><div class="line">                            ^~</div><div class="line">scripts/Makefile.build:328: recipe for target &apos;/var/lib/dkms/r8168/8.043.02/build/r8168_n.o&apos; failed</div><div class="line">make[1]: *** [/var/lib/dkms/r8168/8.043.02/build/r8168_n.o] Error 1</div><div class="line">Makefile:1527: recipe for target &apos;_module_/var/lib/dkms/r8168/8.043.02/build&apos; failed</div><div class="line">make: *** [_module_/var/lib/dkms/r8168/8.043.02/build] Error 2</div><div class="line">make: Leaving directory &apos;/usr/src/linux-4.14.77&apos;</div></pre></td></tr></table></figure>
<ul>
<li>删除原有的系统包</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">~$ sudo apt-get purge r8168-dkms</div><div class="line">~$ sudo sh -c ‘echo blacklist r8169 &gt;&gt; /etc/modprobe.d/blacklist.conf’</div></pre></td></tr></table></figure>
<ul>
<li>从<a href="https://github.com/fintecheando/r8168" target="_blank" rel="external">https://github.com/fintecheando/r8168</a>下载驱动.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">~$ git clone https://github.com/fintecheando/r8168</div><div class="line">~$ cd r8168</div><div class="line">~$ sudo ./autorun.sh</div><div class="line"># 查看内核参数</div><div class="line">~$ lsmod | grep r8168</div><div class="line">r8168                 520192  0</div><div class="line"></div><div class="line"># 查看网卡参数</div><div class="line">~$ ethtool -i eth0</div><div class="line">driver: r8168</div><div class="line">version: 8.045.08-NAPI</div><div class="line">firmware-version:</div><div class="line">expansion-rom-version:</div><div class="line">bus-info: 0000:02:00.0</div><div class="line">supports-statistics: yes</div><div class="line">supports-test: no</div><div class="line">supports-eeprom-access: no</div><div class="line">supports-register-dump: yes</div><div class="line">supports-priv-flags: no</div></pre></td></tr></table></figure>
<h1 id="使用-hostapd-配置-WIFI-热点"><a href="#使用-hostapd-配置-WIFI-热点" class="headerlink" title="使用 hostapd 配置 WIFI 热点"></a>使用 hostapd 配置 WIFI 热点</h1><ul>
<li><a href="http://pisarenko.net/blog/2015/02/01/beginners-guide-to-802-dot-11ac-setup/" target="_blank" rel="external">Beginners guide to a custom 802.11ac setup</a></li>
<li><a href="https://wiki.gentoo.org/wiki/Hostapd" target="_blank" rel="external">Hostapd</a></li>
</ul>
<h2 id="查看网卡配置"><a href="#查看网卡配置" class="headerlink" title="查看网卡配置"></a>查看网卡配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">~$ iw list | grep &quot;Supported interface modes&quot; -A 8</div><div class="line">        Supported interface modes:</div><div class="line">                 * IBSS</div><div class="line">                 * managed</div><div class="line">                 * AP</div><div class="line">                 * monitor</div><div class="line">                 * P2P-client</div><div class="line">                 * P2P-GO</div><div class="line">        Band 1:</div><div class="line">                Capabilities: 0x1862</div><div class="line">~$ iw reg get</div><div class="line">global</div><div class="line">country 00: DFS-UNSET</div><div class="line">        (2402 - 2472 @ 40), (N/A, 20), (N/A)</div><div class="line">        (2457 - 2482 @ 20), (N/A, 20), (N/A), AUTO-BW, NO-IR</div><div class="line">        (2474 - 2494 @ 20), (N/A, 20), (N/A), NO-OFDM, NO-IR</div><div class="line">        (5170 - 5250 @ 80), (N/A, 20), (N/A), AUTO-BW, NO-IR</div><div class="line">        (5250 - 5330 @ 80), (N/A, 20), (0 ms), DFS, AUTO-BW, NO-IR</div><div class="line">        (5490 - 5730 @ 160), (N/A, 20), (0 ms), DFS, NO-IR</div><div class="line">        (5735 - 5835 @ 80), (N/A, 20), (N/A), NO-IR</div><div class="line">        (57240 - 63720 @ 2160), (N/A, 0), (N/A)</div></pre></td></tr></table></figure>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">~$ sudo apt-get install hostapd</div><div class="line">~$ cp /usr/share/doc/hostapd/examples/hostapd.config.gz /etc/hostapd/</div><div class="line">~$ gzip <span class="_">-d</span> /etc/hostapd/hostapd.conf</div></pre></td></tr></table></figure>
<h2 id="调试配置文件错误"><a href="#调试配置文件错误" class="headerlink" title="调试配置文件错误"></a>调试配置文件错误</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 配置文件错误</span></div><div class="line">~$ hostapd /etc/hostapd/hostapd.conf</div><div class="line">Configuration file: /etc/hostapd/hostapd.conf</div><div class="line">Cannot <span class="built_in">enable</span> IEEE 802.11d without setting the country_code</div><div class="line">2 errors found <span class="keyword">in</span> configuration file <span class="string">'/etc/hostapd/hostapd.conf'</span></div><div class="line">Failed to <span class="built_in">set</span> up interface with /etc/hostapd/hostapd.conf</div><div class="line">Failed to initialize interface</div><div class="line"></div><div class="line"><span class="comment"># 缺少rfkill模块支持.</span></div><div class="line">~$ sudo hostapd -dd /etc/hostapd/hostapd.conf</div><div class="line">random: Trying to <span class="built_in">read</span> entropy from /dev/random</div><div class="line">Configuration file: /etc/hostapd/hostapd.conf</div><div class="line">ctrl_interface_group=0</div><div class="line">rfkill: Cannot open RFKILL control device</div><div class="line">nl80211: RFKILL status not available</div><div class="line"></div><div class="line"><span class="comment"># 测试wpa_support</span></div><div class="line">~$ sudo cp /usr/share/doc/wpasupplicant/examples/wpa_supplicant.conf.gz /etc/wpa_supplicant/</div><div class="line">~$ wpa_supplicant -B -i wlan0 -D wext -c /etc/wpa_supplicant/wpa_supplicant.conf</div></pre></td></tr></table></figure>
<h2 id="5G-配置实例"><a href="#5G-配置实例" class="headerlink" title="5G 配置实例"></a>5G 配置实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">~$ grep -v -e &apos;^#&apos; -e &apos;^$&apos; /etc/hostapd/hostapd.conf</div><div class="line">interface=wlan0 # the interface used by the AP</div><div class="line">logger_syslog=0</div><div class="line">logger_syslog_level=1</div><div class="line">logger_stdout=0</div><div class="line">logger_stdout_level=1</div><div class="line">ctrl_interface=/var/run/hostapd</div><div class="line">ctrl_interface_group=0</div><div class="line">ssid=lcy</div><div class="line">country_code=US</div><div class="line">ieee80211d=1</div><div class="line">#ieee80211n=1          # 802.11n support 这一个选项有很多设备不支持,可能造成无法启动.</div><div class="line">hw_mode=a   # a simply means 5GHz</div><div class="line">channel=40  # 第40号信道</div><div class="line">beacon_int=100</div><div class="line">dtim_period=2</div><div class="line">max_num_sta=255</div><div class="line">macaddr_acl=0</div><div class="line">auth_algs=1</div><div class="line">ignore_broadcast_ssid=0</div><div class="line">wmm_enabled=1   # QoS support</div><div class="line">wmm_ac_bk_cwmin=4</div><div class="line">wmm_ac_bk_cwmax=10</div><div class="line">wmm_ac_bk_aifs=7</div><div class="line">wmm_ac_bk_txop_limit=0</div><div class="line">wmm_ac_bk_acm=0</div><div class="line">wmm_ac_be_aifs=3</div><div class="line">wmm_ac_be_cwmin=4</div><div class="line">wmm_ac_be_cwmax=10</div><div class="line">wmm_ac_be_txop_limit=0</div><div class="line">wmm_ac_be_acm=0</div><div class="line">wmm_ac_vi_aifs=2</div><div class="line">wmm_ac_vi_cwmin=3</div><div class="line">wmm_ac_vi_cwmax=4</div><div class="line">wmm_ac_vi_txop_limit=94</div><div class="line">wmm_ac_vi_acm=0</div><div class="line">wmm_ac_vo_aifs=2</div><div class="line">wmm_ac_vo_cwmin=2</div><div class="line">wmm_ac_vo_cwmax=3</div><div class="line">wmm_ac_vo_txop_limit=47</div><div class="line">wmm_ac_vo_acm=0</div><div class="line">ieee80211ac=1   # 802.11ac support</div><div class="line">vht_capab=[SHORT-GI-80][SHORT-GI-160][[VHT160-80PLUS80]][MU-BEAMFORMER][MU-BEAMFORMEE][SU-BEAMFORMER][SU-BEAMFORMEE]</div><div class="line">require_vht=0</div><div class="line">vht_oper_centr_freq_seg0_idx=40  #对应前面第40号信道.</div><div class="line">eap_server=0</div><div class="line">wpa=2   # WPA2 only</div><div class="line">wpa_psk_file=/etc/hostapd/hostapd.wpa_psk   # 这里可是密钥配置文件,要把属性改成400</div><div class="line">wpa_key_mgmt=WPA-PSK</div><div class="line">rsn_pairwise=CCMP</div></pre></td></tr></table></figure>
<h2 id="配置主机路由"><a href="#配置主机路由" class="headerlink" title="配置主机路由"></a>配置主机路由</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">root<span class="comment"># echo "net.ipv4.ip_forward=1" &gt; /etc/sysconf.ctl  # 这一行很重要.</span></div><div class="line">root<span class="comment"># iptables -t nat -I  POSTROUTING -j MASQUERADE  # 配置主机的NAT路由.确定是在第一条规则.</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="Linux-下是使用蓝牙串口通信"><a href="#Linux-下是使用蓝牙串口通信" class="headerlink" title="Linux 下是使用蓝牙串口通信"></a>Linux 下是使用蓝牙串口通信</h1><ul>
<li>如果是自编译内核要确保<code>RFCOMM protocol support (BT_RFCOMM)</code>是编译成模块的，而不能直接编入内核或者不编。</li>
<li>Linux 下使用蓝牙工具要安装<code>bluez</code>软件,有一个图形配置程序<code>blueman</code>,使用会报一些 Python 与 Dbus 的错误,还是直接修改配置文件解决使用问题.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">~$ cat /etc/bluetooth/rfcomm.conf</div><div class="line">rfcomm0 &#123;</div><div class="line">        <span class="built_in">bind</span> yes;</div><div class="line">        device 00:15:83:00:43:AB</div><div class="line">        channel 0;</div><div class="line">        comment <span class="string">"Serial Port"</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">rfcomm1 &#123;</div><div class="line">    <span class="built_in">bind</span> yes;</div><div class="line">    device 00:14:01:22:14:49;</div><div class="line">    channel 1;</div><div class="line">    connment <span class="string">"Serial Port 1"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="配对蓝牙"><a href="#配对蓝牙" class="headerlink" title="配对蓝牙"></a>配对蓝牙</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$ bluetoothctl</div><div class="line">[NEW] Controller 00:02:5B:0A:59:3A debian-0 [default]</div><div class="line">[NEW] Device 00:14:01:22:14:49 lcy</div><div class="line">[bluetooth]<span class="comment"># power on</span></div><div class="line">Changing power on succeeded</div><div class="line">[bluetooth]<span class="comment"># agent on</span></div><div class="line">Agent registered</div><div class="line">[bluetooth]<span class="comment"># pair 00:14:01:22:14:49</span></div><div class="line">Attempting to pair with 00:14:01:22:14:49</div><div class="line">[CHG] Device 00:14:01:22:14:49 Connected: yes</div><div class="line">Request PIN code</div><div class="line">[agent] Enter PIN code: 1234</div><div class="line">[CHG] Device 00:14:01:22:14:49 Paired: yes</div><div class="line">Pairing successful</div><div class="line">[CHG] Device 00:14:01:22:14:49 Connected: no</div></pre></td></tr></table></figure>
<h2 id="手动边接-RFCOMM-串口"><a href="#手动边接-RFCOMM-串口" class="headerlink" title="手动边接 RFCOMM 串口"></a>手动边接 RFCOMM 串口</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> sudo rfcomm connect /dev/rfcomm0 00:14:01:22:14:49 1</div><div class="line">Connected /dev/rfcomm0 to 00:14:01:22:14:49 on channel 1</div><div class="line">Press CTRL-C <span class="keyword">for</span> hangup</div></pre></td></tr></table></figure>
<ul>
<li>运行上面的命令无错,就可以使用 minicom 连接它了,<code>sudo minicom -o -b 115200 -D /dev/rfcomm0</code></li>
<li>如果运行图形配置向导，要先运行<code>blueman-applet</code>再运行<code>blueman-manager</code>,就可以配置了。</li>
</ul>
<h2 id="蓝牙错误"><a href="#蓝牙错误" class="headerlink" title="蓝牙错误"></a>蓝牙错误</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">$ systemctl status bluetooth</div><div class="line">● bluetooth.service - Bluetooth service</div><div class="line">   Loaded: loaded (/lib/systemd/system/bluetooth.service; enabled; vendor preset: enabled)</div><div class="line">   Active: failed (Result: signal) since Wed 2018-06-20 14:54:03 CST; 5min ago</div><div class="line">     Docs: man:bluetoothd(8)</div><div class="line"> Main PID: 772 (code=killed, signal=KILL)</div><div class="line">   Status: <span class="string">"Running"</span></div><div class="line">michael@debian:/etc/init.d$ sudo systemctl status bluetooth</div><div class="line">● bluetooth.service - Bluetooth service</div><div class="line">   Loaded: loaded (/lib/systemd/system/bluetooth.service; enabled; vendor preset: enabled)</div><div class="line">   Active: failed (Result: signal) since Wed 2018-06-20 14:54:03 CST; 5min ago</div><div class="line">     Docs: man:bluetoothd(8)</div><div class="line"> Main PID: 772 (code=killed, signal=KILL)</div><div class="line">   Status: <span class="string">"Running"</span></div><div class="line"></div><div class="line">Jun 20 14:41:29 debian bluetoothd[772]: Failed to obtain handles <span class="keyword">for</span> <span class="string">"Service Changed"</span> characteristic</div><div class="line">Jun 20 14:41:29 debian bluetoothd[772]: Sap driver initialization failed.</div><div class="line">Jun 20 14:41:29 debian bluetoothd[772]: sap-server: Operation not permitted (1)</div><div class="line">Jun 20 14:41:29 debian bluetoothd[772]: Endpoint registered: sender=:1.67 path=/MediaEndpoint/A2DPSource</div><div class="line">Jun 20 14:41:29 debian bluetoothd[772]: Endpoint registered: sender=:1.67 path=/MediaEndpoint/A2DPSink</div><div class="line">Jun 20 14:42:00 debian bluetoothd[772]: vendor 0x0 product: 0x0</div><div class="line">Jun 20 14:43:36 debian bluetoothd[772]: vendor 0x0 product: 0x0</div><div class="line">Jun 20 14:54:03 debian systemd[1]: bluetooth.service: Main process exited, code=killed, status=9/KILL</div><div class="line">Jun 20 14:54:03 debian systemd[1]: bluetooth.service: Unit entered failed state.</div><div class="line">Jun 20 14:54:03 debian systemd[1]: bluetooth.service: Failed with result <span class="string">'signal'</span>.</div></pre></td></tr></table></figure>
<h1 id="Linux-Systemctl-启动服务超时设置"><a href="#Linux-Systemctl-启动服务超时设置" class="headerlink" title="Linux Systemctl 启动服务超时设置"></a>Linux Systemctl 启动服务超时设置</h1><ul>
<li>下面用一个网络连接服务为示例,如果网络配置是 DHCP,刚好网络没有提供 DHCP 服务,这时该服务程序会重试(默认)两分钟才会报错,这里可以设置成 5 到 10 秒,快速跳过该服务启动.</li>
<li>在文件/lib/systemd/system/networking.service.d/network-pre.conf 里添加下面两行:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[Service]</div><div class="line">TimeoutStartSec=15</div></pre></td></tr></table></figure>
<h1 id="安装-IBus-输入法框架"><a href="#安装-IBus-输入法框架" class="headerlink" title="安装 IBus 输入法框架"></a>安装 IBus 输入法框架</h1><ul>
<li>IBus (“Intelligent Input Bus”) 是一个 输入法框架，一个输入非英语字符的系统。IBus 的功能与 SCIM 和 UIM 类似。在 Debian 下面有一个问题,如果不安装<code>ibus-gtk3,ibus-gtk</code>就会出现<strong>wxWidgets</strong>框架下的文本输入框无法使用<code>Back Space,Arrown keys</code>这些按键.<a href="https://wiki.archlinux.org/index.php/IBus_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87" target="_blank" rel="external">安装指导</a>&gt;)</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">~$ dpkg <span class="_">-l</span> | grep <span class="string">"ibus"</span></div><div class="line">ii  gir1.2-ibus-1.0:amd64                             1.5.14-3                                    amd64        Intelligent Input Bus - introspection data</div><div class="line">ii  ibus                                              1.5.14-3                                    amd64        Intelligent Input Bus - core</div><div class="line">ii  ibus-gtk:amd64                                    1.5.14-3                                    amd64        Intelligent Input Bus - GTK+2 support</div><div class="line">ii  ibus-gtk3:amd64                                   1.5.14-3                                    amd64        Intelligent Input Bus - GTK+3 support</div><div class="line">ii  ibus-qt4                                          1.3.3-1                                     amd64        qt-immodule <span class="keyword">for</span> ibus (QT4) (plugin)</div><div class="line">ii  ibus-table                                        1.9.14-3                                    all          table engine <span class="keyword">for</span> IBus</div><div class="line">ii  ibus-table-wubi                                   1.8.2-2                                     all          ibus-table input method: Wubi</div><div class="line">ii  libgusb-dev                                       0.2.9-1+b1                                  amd64        GLib wrapper around libusb1 - development files</div><div class="line">ii  libgusb2:amd64                                    0.2.9-1+b1                                  amd64        GLib wrapper around libusb1</div><div class="line">ii  libhidapi-libusb0:amd64                           0.8.0~rc1+git20140818.d17db57+dfsg-1        amd64        Multi-Platform library <span class="keyword">for</span> communication with HID devices (libusb backend)</div><div class="line">ii  libibus-1.0-5:amd64                               1.5.14-3                                    amd64        Intelligent Input Bus - shared library</div><div class="line">ii  libibus-1.0-dev:amd64                             1.5.14-3                                    amd64        Intelligent Input Bus - development file</div><div class="line">ii  libibus-qt1                                       1.3.3-1                                     amd64        qt-immodule <span class="keyword">for</span> ibus (QT4) (library)</div><div class="line"></div><div class="line">~$ cat ~/.xinitrc</div><div class="line"><span class="built_in">export</span> GTK_IM_MODULE=ibus</div><div class="line"><span class="built_in">export</span> QT_IM_MODULE=ibus</div><div class="line"><span class="built_in">export</span> XMODIFIERS=<span class="string">"@im=ibus"</span></div></pre></td></tr></table></figure>
<ul>
<li>如果要配置<code>locales</code>,方法如下:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">~$ sudo apt-get install locales</div><div class="line">~$ sudo dpkg-reconfigure locales</div><div class="line">~$ sudo locale-gen</div></pre></td></tr></table></figure>
<hr>
<h1 id="BOSSAC-烧写-Arduino-DUE-无法找到设备"><a href="#BOSSAC-烧写-Arduino-DUE-无法找到设备" class="headerlink" title="BOSSAC 烧写 Arduino-DUE 无法找到设备"></a>BOSSAC 烧写 Arduino-DUE 无法找到设备</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">./bossac -i <span class="_">-d</span> --port=ttyACM0 -U <span class="literal">false</span> <span class="_">-e</span> -w -v -b ./nuttx.bin -R</div><div class="line"></div><div class="line"></div><div class="line">Set binary mode</div><div class="line">Send auto-baud</div><div class="line">Set binary mode</div><div class="line">No device found on /dev/ttyACM0</div></pre></td></tr></table></figure>
<h2 id="处理方法"><a href="#处理方法" class="headerlink" title="处理方法"></a>处理方法</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">stty -F /dev/ttyACM0 speed 1200 cs8 -cstopb -parenb</div></pre></td></tr></table></figure>
<hr>
<h1 id="Virt-Manager-虚拟机无法启动"><a href="#Virt-Manager-虚拟机无法启动" class="headerlink" title="Virt-Manager 虚拟机无法启动"></a>Virt-Manager 虚拟机无法启动</h1><ul>
<li>有时 KVM 框架虚拟机系统无法启动,错误如下:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Error starting domain: Requested operation is not valid: network <span class="string">'default'</span> is not active</div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">[...]</div></pre></td></tr></table></figure>
<ul>
<li>通过如下命令启动网络即可.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">~$ sudo virsh net-list --all</div><div class="line"> Name                 State      Autostart     Persistent</div><div class="line">----------------------------------------------------------</div><div class="line"> default              inactive   no            yes</div><div class="line"></div><div class="line">~$ sudo virsh net-start default</div><div class="line">Network default started</div></pre></td></tr></table></figure>
<hr>
<h2 id="Virt-Manager-使用-OpenvSwitch-交换机"><a href="#Virt-Manager-使用-OpenvSwitch-交换机" class="headerlink" title="Virt-Manager 使用 OpenvSwitch 交换机"></a>Virt-Manager 使用 OpenvSwitch 交换机</h2><ul>
<li>使用 OpenvSwitch 的网络服务启动会有延迟一分钟左右.</li>
</ul>
<h2 id="安装-OpenvSwitch"><a href="#安装-OpenvSwitch" class="headerlink" title="安装 OpenvSwitch"></a>安装 OpenvSwitch</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">~$ dpkg <span class="_">-l</span> | grep <span class="string">"openvswitch"</span></div><div class="line">ii  openvswitch-common                                2.6.2~pre+git20161223-3                     amd64        Open vSwitch common components</div><div class="line">ii  openvswitch-switch                                2.6.2~pre+git20161223-3                     amd64        Open vSwitch switch implementations</div></pre></td></tr></table></figure>
<h2 id="创建桥接端口"><a href="#创建桥接端口" class="headerlink" title="创建桥接端口"></a>创建桥接端口</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">~$ sudo ovs-vsctl add-br ovsbr0</div><div class="line">~$ sudo ovs-vsctl add-port ovsbr0 eth0</div><div class="line">~$ sudo ovs-vsctl show</div><div class="line">dbeec575-be91-48b6-bffa-0894b0fa24dd</div><div class="line">    Bridge <span class="string">"ovsbr0"</span></div><div class="line">        Port <span class="string">"ovsbr0"</span></div><div class="line">            Interface <span class="string">"ovsbr0"</span></div><div class="line">                <span class="built_in">type</span>: internal</div><div class="line">        Port <span class="string">"vnet0"</span></div><div class="line">            Interface <span class="string">"vnet0"</span></div><div class="line">        Port <span class="string">"eth0"</span></div><div class="line">            Interface <span class="string">"eth0"</span></div><div class="line">    ovs_version: <span class="string">"2.6.2"</span></div><div class="line"></div><div class="line">~$ sudo ip addr del 192.168.1.100 dev eth0</div><div class="line">~$ sudo ip addr add 192.168.1.100 dev ovsbr0</div></pre></td></tr></table></figure>
<h2 id="修改网卡启动配置"><a href="#修改网卡启动配置" class="headerlink" title="修改网卡启动配置"></a>修改网卡启动配置</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">~$ cat /etc/network/interfaces</div><div class="line">[...]</div><div class="line"></div><div class="line">auto eth0</div><div class="line">iface eth0 inet manual</div><div class="line">    up ip link <span class="built_in">set</span> dev <span class="variable">$IFACE</span> up</div><div class="line">    down ip link <span class="built_in">set</span> dev <span class="variable">$IFACE</span> down</div><div class="line"></div><div class="line"></div><div class="line">auto ovsbr0</div><div class="line">iface ovsbr0 inet static</div><div class="line">    up ip link <span class="built_in">set</span> dev <span class="variable">$IFACE</span> up</div><div class="line">    down ip link <span class="built_in">set</span> dev <span class="variable">$IFACE</span> down</div><div class="line">    address 192.168.1.100</div><div class="line">    netmask 255.255.255.0</div><div class="line">    gateway 192.168.1.1</div><div class="line"></div><div class="line">[...]</div></pre></td></tr></table></figure>
<h2 id="创建-Virt-Manager-桥接网络"><a href="#创建-Virt-Manager-桥接网络" class="headerlink" title="创建 Virt-Manager 桥接网络"></a>创建 Virt-Manager 桥接网络</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">~$ sudo cp /etc/libvirt/qemu/networks/&#123;default.xml,ovsbr0.xml&#125;</div><div class="line"></div><div class="line"><span class="comment"># 把内容修改成如下所示</span></div><div class="line">~$ cat /etc/libvirt/qemu/networks/ovsbr0.xml</div><div class="line">&lt;!--</div><div class="line">WARNING: THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE</div><div class="line">OVERWRITTEN AND LOST. Changes to this xml configuration should be made using:</div><div class="line">  virsh net-edit ovsbr0</div><div class="line">or other application using the libvirt API.</div><div class="line">--&gt;</div><div class="line"></div><div class="line">&lt;network&gt;</div><div class="line">  &lt;name&gt;ovsbr0&lt;/name&gt;</div><div class="line">  &lt;uuid&gt;<span class="built_in">fc</span>0b3bb1-c273-49dc-b469-153dc4c452e2&lt;/uuid&gt;</div><div class="line">  &lt;forward mode=<span class="string">'bridge'</span>/&gt;</div><div class="line">  &lt;bridge name=<span class="string">'ovsbr0'</span>/&gt;</div><div class="line">  &lt;virtualport <span class="built_in">type</span>=<span class="string">'openvswitch'</span>/&gt;</div><div class="line">&lt;/network&gt;</div><div class="line"></div><div class="line">~$ sudo virsh net-define /etc/libvirt/qemu/networks/ovsbr0.xml</div><div class="line">~$ sudo virsh net-create /etc/libvirt/qemu/networks/ovsbr0.xml</div><div class="line"></div><div class="line">~$ sudo virsh net-list --all</div><div class="line"> Name                 State      Autostart     Persistent</div><div class="line">----------------------------------------------------------</div><div class="line"> default              active     yes           yes</div><div class="line"> ovsbr0               inactive     no           yes</div><div class="line"></div><div class="line">~$ sudo virsh net-autostart ovsbr0</div></pre></td></tr></table></figure>
<h2 id="设置虚拟机的网络"><a href="#设置虚拟机的网络" class="headerlink" title="设置虚拟机的网络"></a>设置虚拟机的网络</h2><ul>
<li>现在 KVM 虚拟机就有<code>default</code>,<code>ovsbr0</code>两个网络,添加一个连接到<code>OpenvSwitch</code>上的网卡如下图所示:</li>
</ul>
<p><img src="/imgs/ovsbr0.png" alt="ovsbr0"></p>
<hr>
<h1 id="创建-Debian-Live-USB-系统盘"><a href="#创建-Debian-Live-USB-系统盘" class="headerlink" title="创建 Debian Live USB 系统盘"></a>创建 Debian Live USB 系统盘</h1><ul>
<li>如果想要试用 Linux,又不想安装它,可以把它烧写到 U 盘里,做为启动盘或者系统恢复盘.</li>
<li><a href="http://mirrors.163.com/debian-cd" target="_blank" rel="external"><code>Debian 国内镜像下载链接</code></a></li>
<li><strong>注意:</strong> 这里一定要选择<code>live</code>标志的 iso 镜像下载.在 windows 下面要先下载一个叫<a href="http://launchpad.net/win32-image-writer/0.2/0.2/+download/win32diskimager-RELEASE-0.2-r23-win32.zip" target="_blank" rel="external"><code>Win32DiskImager</code></a>的烧写工具,Linux 就很简单使用下面命令就能完成:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ ls  debian-live-9.4.0-amd64-mate.iso</div><div class="line">debian-live-9.4.0-amd64-mate.iso</div><div class="line">$ sudo dd <span class="keyword">if</span>=debian-live-9.4.0-amd64-mate.iso of=/dev/sdc1</div><div class="line">4002944+0 records <span class="keyword">in</span></div><div class="line">4002944+0 records out</div><div class="line">2049507328 bytes (2.0 GB, 1.9 GiB) copied, 7.39192 s, 277 MB/s</div></pre></td></tr></table></figure>
<ul>
<li><strong>严重注意</strong> 这里的<code>/dev/sdc1</code>一要是你想要格式华的 U 盘,如果这里是当前硬盘,或者是有重要资料的盘符,就会直接覆盖它,找不回来.<strong>注意,注意,注意</strong></li>
</ul>
<hr>
<h1 id="开启-Debian-Hibernate-功能"><a href="#开启-Debian-Hibernate-功能" class="headerlink" title="开启 Debian Hibernate 功能"></a>开启 Debian Hibernate 功能</h1><ul>
<li>有时工作进行到一个阶段,不想系统重启之后,再费时间来打开与配置环境.开启系统休眠功能非常有用.先要确保有一个<code>swap</code>分区,最好是两倍与系统内存的大小.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">~$ sudo apt-get install acpi-support pm-utils</div><div class="line">~$ sudo mkswap /dev/sdb1</div><div class="line">~$ sudo swapon /dev/sdb1</div><div class="line"><span class="comment"># 确保下面这两个文件里有这些行.</span></div><div class="line">~$ sudo cat /etc/fstab  | grep <span class="string">"swap"</span></div><div class="line">/dev/sdb1       none    swap    pri=1      0       0</div><div class="line"></div><div class="line">~$ blkid</div><div class="line">[...]</div><div class="line">/dev/sdb3: UUID=<span class="string">"ae170b9d-832a-46a7-beca-5fb7c9329b1b"</span> TYPE=<span class="string">"swap"</span> PARTUUID=<span class="string">"6daebe63-03"</span></div><div class="line">~$ sudo cat /etc/default/grub | grep <span class="string">"resume"</span></div><div class="line">GRUB_CMDLINE_LINUX=<span class="string">"resume=UUID=ae170b9d-832a-46a7-beca-5fb7c9329b1b"</span></div><div class="line"></div><div class="line">~<span class="variable">$cat</span> /etc/initramfs-tools/conf.d/resume</div><div class="line">RESUME=UUID=ae170b9d-832a-46a7-beca-5fb7c9329b1b</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#这一操作很重要.</span></div><div class="line">~$  update-initramfs -u -k `uname -r`  <span class="comment">## 更新当前内核的启动镜像.</span></div><div class="line">~$ sudo update-grub</div><div class="line"></div><div class="line">~$ cat /proc/acpi/wakeup</div><div class="line">Device	S-state	  Status   Sysfs node</div><div class="line">PB31	  S4	*disabled  pci:0000:00:03.1</div><div class="line">PB32	  S4	*disabled</div><div class="line">PB33	  S4	*disabled  pci:0000:00:03.3</div><div class="line">PB34	  S4	*disabled</div><div class="line">SBAZ	  S4	*disabled  pci:0000:00:14.2</div><div class="line">PS2K	  S3	*disabled</div><div class="line">PS2M	  S3	*disabled</div><div class="line">ECIR	  S4	*disabled</div><div class="line">P0PC	  S4	*disabled  pci:0000:00:14.4</div><div class="line">OHC1	  S4	*disabled  pci:0000:00:12.0</div><div class="line">EHC1	  S4	*disabled  pci:0000:00:12.2</div><div class="line">OHC2	  S4	*disabled  pci:0000:00:13.0</div><div class="line">EHC2	  S4	*disabled  pci:0000:00:13.2</div><div class="line">OHC3	  S4	*disabled</div><div class="line">EHC3	  S4	*disabled</div><div class="line">OHC4	  S4	*disabled  pci:0000:00:14.5</div><div class="line">XHC0	  S4	*disabled  pci:0000:00:10.0</div><div class="line">XHC1	  S4	*disabled  pci:0000:00:10.1</div><div class="line">PE20	  S4	*disabled</div><div class="line">PE21	  S4	*disabled</div><div class="line">PE22	  S4	*disabled</div><div class="line">PE23	  S4	*disabled</div><div class="line">PWRB	  S3	*enabled   platform:PNP0C0C:00</div><div class="line"></div><div class="line"><span class="comment"># 上面是一些如何唤醒休眠的设备, 休眠中是可以通过移动鼠标或者键盘来唤醒,但是我这里把它们都关闭,让它只能通过电源按钮(PWRB)唤醒系统.</span></div><div class="line"></div><div class="line">~$  grep <span class="string">"echo"</span> /etc/rc.local</div><div class="line">[...]</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> OHC1 EHC1 OHC2 EHC2 OHC4 XHC0 XHC1;</div><div class="line"><span class="keyword">do</span></div><div class="line">cat /proc/acpi/wakeup  | grep <span class="string">"<span class="variable">$i</span>"</span> | grep <span class="string">"enabled"</span> &amp;&amp; <span class="built_in">echo</span> <span class="string">"<span class="variable">$i</span>"</span> &gt; /proc/acpi/wakeup</div><div class="line"><span class="keyword">done</span></div><div class="line">[...]</div></pre></td></tr></table></figure>
<ul>
<li><p>测试休眠功能<code>echo disk &gt; /sys/power/state</code>,或者运行<code>pm-hibernate</code>进行休眠.</p>
</li>
<li><p>通过上面设置,系统休眠与唤醒都很符合我的预期.还有一种方法是使用一个交换文件,不需要一个独立的分区,请<a href="https://wiki.debian.org/Hibernation/Hibernate_Without_Swap_Partition" target="_blank" rel="external">参考这里</a></p>
</li>
<li><p>如果上述设置能休眠不能关机,就是休眠后马上又重启了,<a href="https://wiki.archlinux.org/index.php/Power_management/Suspend_and_hibernate#System_does_not_power_off_when_hibernating" target="_blank" rel="external">参照这里</a>需要如下设置:</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">/etc/systemd/sleep.conf.d/hibernatemode.conf</div><div class="line"></div><div class="line">[Sleep]</div><div class="line">HibernateMode=shutdown</div></pre></td></tr></table></figure>
<ul>
<li>如果不能使用界的<code>System-&gt;Shut Down-&gt;Hibernate</code>的进行休眠,但是可以直接使用<code>sudo pm-hibernate</code>.需要重装下面的包试试.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~$ apt-get install --reinstall pm-utils mate-power-manager-common hibernate upower</div></pre></td></tr></table></figure>
<ul>
<li>如果休眠后恢复系统不能使用<code>usb wifi</code>(rtl8812au) 网卡.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">~$ sudo  lshw -C network | grep <span class="string">"wlan"</span> -A +3 | grep <span class="string">"driver"</span></div><div class="line">       configuration: broadcast=yes driver=rtl8812au ip=192.168.5.190 multicast=yes wireless=IEEE 802.11</div><div class="line"><span class="comment"># 创建如下文件</span></div><div class="line">~$ sudo cat /etc/pm/config.d/unload_modules</div><div class="line">SUSPEND_MODULES=<span class="string">"<span class="variable">$SUSPEND_MODULES</span> rtl8812au"</span></div><div class="line"><span class="comment"># 创建成功,要加上运行权限.</span></div><div class="line">~$ sudo cat /etc/pm/sleep.d/10_resume_wifi</div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"></div><div class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$&#123;1&#125;</span>"</span> <span class="keyword">in</span></div><div class="line">  resume|thaw)</div><div class="line">    nmcli r wifi off &amp;&amp; nmcli r wifi on;</div><div class="line"><span class="keyword">esac</span></div></pre></td></tr></table></figure>
<h1 id="程序找不到链接库位置"><a href="#程序找不到链接库位置" class="headerlink" title="程序找不到链接库位置"></a>程序找不到链接库位置</h1><ul>
<li>Python ImportError,这种错误是因为在<code>PYTHONPATH</code>路径中找不相就的模块.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">~$ ./modes_rx</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"./modes_rx"</span>, line 27, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    import air_modes</div><div class="line">ImportError: No module named air_modes</div><div class="line"></div><div class="line">~$ PYTHONPATH=../lib/python2.7/dist-packages　./modes_rx    <span class="comment">#指定的环境变量对了就可以了.</span></div></pre></td></tr></table></figure>
<ul>
<li>本地库链接错误</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">~$ ldd /usr/<span class="built_in">local</span>/bin/rtl_tcp</div><div class="line">	linux-vdso.so.1 (0x00007fff3d3eb000)</div><div class="line">	librtlsdr.so.0 =&gt; not found　　<span class="comment">#　默认位置/lib/x86_64-linux-gnu找不该库.</span></div><div class="line">	libusb-1.0.so.0 =&gt; /lib/x86_64-linux-gnu/libusb-1.0.so.0 (0x00007f3d0b328000)</div><div class="line">	libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f3d0b108000)</div><div class="line">	libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f3d0ad68000)</div><div class="line">	libudev.so.1 =&gt; /lib/x86_64-linux-gnu/libudev.so.1 (0x00007f3d0b6d8000)</div><div class="line">	/lib64/ld-linux-x86-64.so.2 (0x00007f3d0b548000)</div><div class="line">	librt.so.1 =&gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007f3d0ab60000)</div><div class="line"></div><div class="line">~$ ls  /usr/<span class="built_in">local</span>/lib/librtlsdr.so.0　　<span class="comment">#　这个位置有这个库</span></div><div class="line">/usr/<span class="built_in">local</span>/lib/librtlsdr.so.0</div></pre></td></tr></table></figure>
<ul>
<li>上面的错误有两种方法可以解决.１,把<code>/usr/local/lib</code>加入到<code>/etc/ld.so.conf</code>里,再执行一次<code>ldconfig</code>就可以链接这个库了.2,使用<code>LD_LIBRARY_PATH</code>环境变量指位置,这样运行:</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">~$ LD_LIBRARY_PATH=/usr/<span class="built_in">local</span>/lib  rtl_tcp</div><div class="line">Found 1 device(s).</div><div class="line">Found Rafael Micro R820T tuner</div><div class="line">Using ezcap USB 2.0 DVB-T/DAB/FM dongle</div><div class="line">Tuned to 100000000 Hz.</div><div class="line">listening...</div><div class="line">Use the device argument <span class="string">'rtl_tcp=127.0.0.1:1234'</span> <span class="keyword">in</span> OsmoSDR (gr-osmosdr) <span class="built_in">source</span></div><div class="line">to receive samples <span class="keyword">in</span> GRC and control rtl_tcp parameters (frequency, gain, ...).</div></pre></td></tr></table></figure>
<h1 id="在内核树里编译单个模块"><a href="#在内核树里编译单个模块" class="headerlink" title="在内核树里编译单个模块"></a>在内核树里编译单个模块</h1><ul>
<li>比如,上面缺少一个<code>rfkill</code>的模块,现在可以在不重编整个内核的前提下,可以单独编译这个内核.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">~$ cd /lib/modules/$(uname -r)/build/net/rfkill</div><div class="line">~$ sudo make -C /lib/modules/$(uname -r)/build M=`pwd` modules   # 要先在.config 把这一个模块选中为`编译`状态.</div><div class="line">make: Entering directory &apos;/usr/src/linux-4.14.77&apos;</div><div class="line">  CC [M]  /lib/modules/4.14.77-20181016-lcy-amd64/build/net/rfkill/core.o</div><div class="line">  LD [M]  /lib/modules/4.14.77-20181016-lcy-amd64/build/net/rfkill/rfkill.o</div><div class="line">  Building modules, stage 2.</div><div class="line">  MODPOST 1 modules</div><div class="line">  CC      /lib/modules/4.14.77-20181016-lcy-amd64/build/net/rfkill/rfkill.mod.o</div><div class="line">  LD [M]  /lib/modules/4.14.77-20181016-lcy-amd64/build/net/rfkill/rfkill.ko</div><div class="line">make: Leaving directory &apos;/usr/src/linux-4.14.77&apos;</div><div class="line">~$ sudo mkdir /lib/modules/$(uname -r)/kernel/net/rfkill</div><div class="line">~$ sudo cp rfkill.ko /lib/modules/$(uname -r)/kernel/net/rfkill/</div><div class="line">~$ sudo depmod -a   # 计算依赖关系</div><div class="line">~$ modprobe -v rfkill  # 加载模块.</div></pre></td></tr></table></figure>
<h1 id="创建大于-2TB-的分区"><a href="#创建大于-2TB-的分区" class="headerlink" title="创建大于 2TB 的分区"></a>创建大于 2TB 的分区</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">~<span class="variable">$parted</span> /dev/sda</div><div class="line">WARNING: You are not superuser.  Watch out <span class="keyword">for</span> permissions.</div><div class="line">GNU Parted 3.2</div><div class="line">Using /dev/sda</div><div class="line">Welcome to GNU Parted! Type <span class="string">'help'</span> to view a list of commands.</div><div class="line">(parted) <span class="built_in">print</span></div><div class="line">Model: ATA ST2000DM008-2FR1 (scsi)</div><div class="line">Disk /dev/sda: 2000GB</div><div class="line">Sector size (logical/physical): 512B/4096B</div><div class="line">Partition Table: gpt</div><div class="line">Disk Flags:</div><div class="line"></div><div class="line">Number  Start  End  Size  File system  Name  Flags</div><div class="line">(parted) mklabel gpt</div><div class="line">(parted) <span class="built_in">print</span></div><div class="line">Model: ATA ST2000DM008-2FR1 (scsi)</div><div class="line">Disk /dev/sda: 2000GB</div><div class="line">Sector size (logical/physical): 512B/4096B</div><div class="line">Partition Table: gpt</div><div class="line">Disk Flags:</div><div class="line"></div><div class="line">Number  Start  End  Size  File system  Name  Flags</div><div class="line"></div><div class="line">(parted) mkpart primary 0GB 2000GB</div><div class="line"></div><div class="line">(parted) <span class="built_in">print</span></div><div class="line">Model: ATA ST2000DM008-2FR1 (scsi)</div><div class="line">Disk /dev/sda: 2000GB</div><div class="line">Sector size (logical/physical): 512B/4096B</div><div class="line">Partition Table: gpt</div><div class="line">Disk Flags:</div><div class="line"></div><div class="line">Number  Start   End     Size    File system  Name     Flags</div><div class="line"> 1      1049kB  2000GB  2000GB               primary</div><div class="line">(parted) quit</div><div class="line">~$ sudo fdisk <span class="_">-l</span> /dev/sda</div><div class="line">Disk /dev/sda: 1.8 TiB, 2000398934016 bytes, 3907029168 sectors</div><div class="line">Units: sectors of 1 * 512 = 512 bytes</div><div class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</div><div class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</div><div class="line">Disklabel <span class="built_in">type</span>: gpt</div><div class="line">Disk identifier: 224F4012-9C49-4331-87F5-77B5CF6C28F5</div><div class="line"></div><div class="line">Device     Start        End    Sectors  Size Type</div><div class="line">/dev/sda1   2048 3907028991 3907026944  1.8T Linux filesystem</div><div class="line"></div><div class="line"></div><div class="line">~$ sudo mkfs.ext4 /dev/sda1</div><div class="line">mke2fs 1.43.4 (31-Jan-2017)</div><div class="line">/dev/sda1 contains a ext3 file system</div><div class="line">    created on Thu Aug 30 09:33:27 2018</div><div class="line">Proceed anyway? (y,N) y</div><div class="line"></div><div class="line">~$ sudo blkid</div><div class="line">/dev/sda1: UUID=<span class="string">"3d6c0885-cacf-41f8-911d-cdf4bd666a49"</span> TYPE=<span class="string">"ext4"</span> PARTLABEL=<span class="string">"primary"</span> PARTUUID=<span class="string">"daeb01c4-ceb5-4227-80d8-d70bfc266317"</span></div><div class="line">~$ cat /etc/fstab</div><div class="line"><span class="comment"># /etc/fstab: static file system information.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Use 'blkid' to print the universally unique identifier for a</span></div><div class="line"><span class="comment"># device; this may be used with UUID= as a more robust way to name devices</span></div><div class="line"><span class="comment"># that works even if disks are added and removed. See fstab(5).</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;</span></div><div class="line">UUID=3d6c0885-cacf-41f8-911d-cdf4bd666a49 /data       ext4    defaults  0   2</div></pre></td></tr></table></figure>
<h1 id="Linux-下修复-屏蔽-磁盘坏块"><a href="#Linux-下修复-屏蔽-磁盘坏块" class="headerlink" title="Linux 下修复(屏蔽)磁盘坏块"></a>Linux 下修复(屏蔽)磁盘坏块</h1><ul>
<li><a href="https://www.tecmint.com/check-linux-hard-disk-bad-sectors-bad-blocks/" target="_blank" rel="external">How to Check Bad Sectors or Bad Blocks on Hard Disk in Linux</a></li>
<li><a href="https://mintguide.org/system/283-how-to-check-and-fix-the-disk-for-errors-and-bad-sectors-in-linux-mint.html" target="_blank" rel="external">How to check and fix the disk for errors and bad sectors </a></li>
<li>查找坏块</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">~$ sudo badlocks -v /dev/sdaX &gt; badsectors.txt</div><div class="line"><span class="comment"># 也可以使用Smartmontools</span></div><div class="line">~$ sudo  smartctl -H /dev/sdaX</div></pre></td></tr></table></figure>
<ul>
<li>修复</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">------------ Specifically <span class="keyword">for</span> ext2/ext3/ext4 file-systems ------------</div><div class="line">~$ sudo e2fsck <span class="_">-l</span> badsectors.txt /dev/sdaX</div><div class="line"></div><div class="line">OR</div><div class="line"></div><div class="line">------------ For other file-systems ------------</div><div class="line">~$ sudo fsck <span class="_">-l</span> badsectors.txt /dev/sdaX</div></pre></td></tr></table></figure>
<h1 id="防止-etc-resolve-conf-被-DHCP-自动修改"><a href="#防止-etc-resolve-conf-被-DHCP-自动修改" class="headerlink" title="防止/etc/resolve.conf 被 DHCP 自动修改"></a>防止/etc/resolve.conf 被 DHCP 自动修改</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">~# cat /etc/NetworkManager/NetworkManager.conf</div><div class="line">[main]</div><div class="line">plugins=ifupdown,keyfile</div><div class="line">dns=none</div><div class="line"></div><div class="line">[ifupdown]</div><div class="line">managed=true</div></pre></td></tr></table></figure>
<hr>
<h1 id="谢谢支持"><a href="#谢谢支持" class="headerlink" title="谢谢支持"></a>谢谢支持</h1><ul>
<li>微信二维码:</li>
</ul>
<p><img src="/imgs/mm_reward_qrcode_1525013906055.png" width="40%" height="40%" align="center/"><br>```</p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Debian-Linux-Shell-Ardunio/" rel="tag"># Debian,Linux,Shell,Ardunio</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/08/06/为Radeon驱动编译Mesa-GLX支持/" rel="next" title="为Radeon驱动编译Mesa-GLX支持">
                <i class="fa fa-chevron-left"></i> 为Radeon驱动编译Mesa-GLX支持
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/08/26/常见编译问题-不定期更新/" rel="prev" title="常见编译问题,不定期更新.">
                常见编译问题,不定期更新. <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars0.githubusercontent.com/u/321919?s=400&u=67298bd9fc3b622eaf93a6cc511a24ac878e86db&v=4"
                alt="yjdwbj" />
            
              <p class="site-author-name" itemprop="name">yjdwbj</p>
              <p class="site-description motion-element" itemprop="description">最是人间留不住,朱颜辞镜花辞树</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">32</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">分类</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">29</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/yjdwbj" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:yjdwbj@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://plus.google.com/yjdwbj" target="_blank" title="Google"><i class="fa fa-fw fa-google"></i>Google</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#PulseAudio-设置与应用"><span class="nav-number">1.</span> <span class="nav-text">PulseAudio 设置与应用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#minicom-使用"><span class="nav-number">2.</span> <span class="nav-text">minicom 使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#AT-命令"><span class="nav-number">2.1.</span> <span class="nav-text">AT 命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#esptool-升级固件"><span class="nav-number">3.</span> <span class="nav-text">esptool 升级固件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#转换-GBK-文本文件的问题"><span class="nav-number">4.</span> <span class="nav-text">转换 GBK 文本文件的问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#批量清除文件名中的特定字符串"><span class="nav-number">5.</span> <span class="nav-text">批量清除文件名中的特定字符串</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux-下-wireless-WPA-加密连接"><span class="nav-number">6.</span> <span class="nav-text">Linux 下 wireless WPA 加密连接</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RTL8169-驱动"><span class="nav-number">7.</span> <span class="nav-text">RTL8169 驱动</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使用-hostapd-配置-WIFI-热点"><span class="nav-number">8.</span> <span class="nav-text">使用 hostapd 配置 WIFI 热点</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看网卡配置"><span class="nav-number">8.1.</span> <span class="nav-text">查看网卡配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装"><span class="nav-number">8.2.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#调试配置文件错误"><span class="nav-number">8.3.</span> <span class="nav-text">调试配置文件错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5G-配置实例"><span class="nav-number">8.4.</span> <span class="nav-text">5G 配置实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置主机路由"><span class="nav-number">8.5.</span> <span class="nav-text">配置主机路由</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux-下是使用蓝牙串口通信"><span class="nav-number">9.</span> <span class="nav-text">Linux 下是使用蓝牙串口通信</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#配对蓝牙"><span class="nav-number">9.1.</span> <span class="nav-text">配对蓝牙</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#手动边接-RFCOMM-串口"><span class="nav-number">9.2.</span> <span class="nav-text">手动边接 RFCOMM 串口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#蓝牙错误"><span class="nav-number">9.3.</span> <span class="nav-text">蓝牙错误</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux-Systemctl-启动服务超时设置"><span class="nav-number">10.</span> <span class="nav-text">Linux Systemctl 启动服务超时设置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#安装-IBus-输入法框架"><span class="nav-number">11.</span> <span class="nav-text">安装 IBus 输入法框架</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BOSSAC-烧写-Arduino-DUE-无法找到设备"><span class="nav-number">12.</span> <span class="nav-text">BOSSAC 烧写 Arduino-DUE 无法找到设备</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#处理方法"><span class="nav-number">12.1.</span> <span class="nav-text">处理方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Virt-Manager-虚拟机无法启动"><span class="nav-number">13.</span> <span class="nav-text">Virt-Manager 虚拟机无法启动</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Virt-Manager-使用-OpenvSwitch-交换机"><span class="nav-number">13.1.</span> <span class="nav-text">Virt-Manager 使用 OpenvSwitch 交换机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-OpenvSwitch"><span class="nav-number">13.2.</span> <span class="nav-text">安装 OpenvSwitch</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建桥接端口"><span class="nav-number">13.3.</span> <span class="nav-text">创建桥接端口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改网卡启动配置"><span class="nav-number">13.4.</span> <span class="nav-text">修改网卡启动配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建-Virt-Manager-桥接网络"><span class="nav-number">13.5.</span> <span class="nav-text">创建 Virt-Manager 桥接网络</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置虚拟机的网络"><span class="nav-number">13.6.</span> <span class="nav-text">设置虚拟机的网络</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#创建-Debian-Live-USB-系统盘"><span class="nav-number">14.</span> <span class="nav-text">创建 Debian Live USB 系统盘</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#开启-Debian-Hibernate-功能"><span class="nav-number">15.</span> <span class="nav-text">开启 Debian Hibernate 功能</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#程序找不到链接库位置"><span class="nav-number">16.</span> <span class="nav-text">程序找不到链接库位置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#在内核树里编译单个模块"><span class="nav-number">17.</span> <span class="nav-text">在内核树里编译单个模块</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#创建大于-2TB-的分区"><span class="nav-number">18.</span> <span class="nav-text">创建大于 2TB 的分区</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux-下修复-屏蔽-磁盘坏块"><span class="nav-number">19.</span> <span class="nav-text">Linux 下修复(屏蔽)磁盘坏块</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#防止-etc-resolve-conf-被-DHCP-自动修改"><span class="nav-number">20.</span> <span class="nav-text">防止/etc/resolve.conf 被 DHCP 自动修改</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#谢谢支持"><span class="nav-number">21.</span> <span class="nav-text">谢谢支持</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yjdwbj</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.2.2</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.2.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.2.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.2.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.2.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.2.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
