<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Linux 下翻墙指南 | 码农记事本</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="参考链接:

lantern(蓝灯)
tor
vpngate
赛风

在国内做为一个程序员,翻墙是一门必不可少的技能,至少对于我来说是这样子的,我很多的知识经验来源于google学习到的.
vpngate
分布式VPN,日本人开发的,曾经一段时间很快很稳定后来被封了,只支持window平台,好久没有关注它了
赛风
赛风是windows下很好的工具.带宽速度一般,但是免费可靠,缺点是不支持linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 下翻墙指南">
<meta property="og:url" content="http://yjdwbj.github.io/2016/12/14/Linux-下翻墙指南/index.html">
<meta property="og:site_name" content="码农记事本">
<meta property="og:description" content="参考链接:

lantern(蓝灯)
tor
vpngate
赛风

在国内做为一个程序员,翻墙是一门必不可少的技能,至少对于我来说是这样子的,我很多的知识经验来源于google学习到的.
vpngate
分布式VPN,日本人开发的,曾经一段时间很快很稳定后来被封了,只支持window平台,好久没有关注它了
赛风
赛风是windows下很好的工具.带宽速度一般,但是免费可靠,缺点是不支持linux">
<meta property="og:image" content="http://yjdwbj.github.io/imgs/aex05246pdr9ik5wosogj3b.png">
<meta property="og:updated_time" content="2016-09-13T16:00:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux 下翻墙指南">
<meta name="twitter:description" content="参考链接:

lantern(蓝灯)
tor
vpngate
赛风

在国内做为一个程序员,翻墙是一门必不可少的技能,至少对于我来说是这样子的,我很多的知识经验来源于google学习到的.
vpngate
分布式VPN,日本人开发的,曾经一段时间很快很稳定后来被封了,只支持window平台,好久没有关注它了
赛风
赛风是windows下很好的工具.带宽速度一般,但是免费可靠,缺点是不支持linux">
<meta name="twitter:image" content="http://yjdwbj.github.io/imgs/aex05246pdr9ik5wosogj3b.png">
  
  
    <link rel="icon" href="/favicon.png">
  
  <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
  <link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo">码农记事本</a>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">主面</a>
        
          <a class="main-nav-link" href="/archives">文章</a>
        
          <a class="main-nav-link" href="/about/index.html">关于</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yjdwbj.github.io"></form>
        </div>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/ppoffice/hexo-theme-alex" title="Fork me on GitHub"></a>
        
      </nav>
    </div>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/" class="mobile-nav-link">主面</a>
  
    <a href="/archives" class="mobile-nav-link">文章</a>
  
    <a href="/about/index.html" class="mobile-nav-link">关于</a>
  
  <div id="search-form-wrap-mobile">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yjdwbj.github.io"></form>
  </div>
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a><span class="category-list-count">8</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/12/15/codeblocks与STM32的开发环境配置/">codeblocks与STM32的开发环境配置</a>
          </li>
        
          <li>
            <a href="/2016/12/14/Linux-下翻墙指南/">Linux 下翻墙指南</a>
          </li>
        
          <li>
            <a href="/2016/11/09/Django-uWsgi-nginx-https-完全配置/">Django+uWsgi+nginx+https 完全配置</a>
          </li>
        
          <li>
            <a href="/2016/09/13/Linux下编译静态MinGW环境-编译windows平台Qt程序/">Linux下编译静态MinGW环境,编译windows平台Qt程序</a>
          </li>
        
          <li>
            <a href="/2016/09/04/vsftpd-FTP服务器与django前端共用sqlite3数据库的示例/">vsftpd FTP服务器与django前端共用sqlite3数据库的示例</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debian-Linux-GLX-ATI-RADEON/">Debian,Linux,GLX,ATI,RADEON</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debian-Linux-Mate/">Debian,Linux,Mate,</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debian-Linux-Raspberry-Pi-ffmpeg/">Debian,Linux,Raspberry Pi,ffmpeg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debian-Linux-Shell/">Debian,Linux,Shell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Django-Ngninx-uWsgi-Let-s-Encrypt/">Django,Ngninx,uWsgi,Let's Encrypt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Qt-C-MinGW/">Qt,C++,MinGW</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Qt5-MinGW/">Qt5,MinGW</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RaspberryPi-Linux/">RaspberryPi,Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STM32-Codeblocks/">STM32,Codeblocks</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vsftpd-Django-Sqlite3/">Vsftpd,Django,Sqlite3</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Debian-Linux-GLX-ATI-RADEON/" style="font-size: 10px;">Debian,Linux,GLX,ATI,RADEON</a> <a href="/tags/Debian-Linux-Mate/" style="font-size: 10px;">Debian,Linux,Mate,</a> <a href="/tags/Debian-Linux-Raspberry-Pi-ffmpeg/" style="font-size: 10px;">Debian,Linux,Raspberry Pi,ffmpeg</a> <a href="/tags/Debian-Linux-Shell/" style="font-size: 10px;">Debian,Linux,Shell</a> <a href="/tags/Django-Ngninx-uWsgi-Let-s-Encrypt/" style="font-size: 10px;">Django,Ngninx,uWsgi,Let's Encrypt</a> <a href="/tags/Qt-C-MinGW/" style="font-size: 10px;">Qt,C++,MinGW</a> <a href="/tags/Qt5-MinGW/" style="font-size: 10px;">Qt5,MinGW</a> <a href="/tags/RaspberryPi-Linux/" style="font-size: 10px;">RaspberryPi,Linux</a> <a href="/tags/STM32-Codeblocks/" style="font-size: 10px;">STM32,Codeblocks</a> <a href="/tags/Vsftpd-Django-Sqlite3/" style="font-size: 10px;">Vsftpd,Django,Sqlite3</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">links</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://hexo.io">Hexo</a>
          </li>
        
          <li>
            <a href="yjdwbj@gmail.com">Email</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
        <section id="main"><article id="post-Linux-下翻墙指南" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/14/Linux-下翻墙指南/" class="article-date">
  <time datetime="2016-12-14T15:04:49.280Z" itemprop="datePublished">2016-12-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/笔记/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Linux 下翻墙指南
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>参考链接:</strong></p>
<ul>
<li><a href="https://getlantern.org" target="_blank" rel="external">lantern(蓝灯)</a></li>
<li><a href="https://www.torproject.org" target="_blank" rel="external">tor</a></li>
<li><a href="http://vpngate.net" target="_blank" rel="external">vpngate</a></li>
<li><a href="https://www.psiphon3.com/en/index.html" target="_blank" rel="external">赛风</a></li>
</ul>
<p>在国内做为一个程序员,翻墙是一门必不可少的技能,至少对于我来说是这样子的,我很多的知识经验来源于<a href="https://www.google.com.hk" target="_blank" rel="external">google</a>学习到的.</p>
<p><strong>vpngate</strong></p>
<p>分布式VPN,日本人开发的,曾经一段时间很快很稳定后来被封了,只支持window平台,好久没有关注它了</p>
<p><strong>赛风</strong></p>
<p>赛风是windows下很好的工具.带宽速度一般,但是免费可靠,缺点是不支持linux,在linux有一个基于python的客户,偶尔能用,早有终止开发了,配置很复杂.\</p>
<p><strong>lantern</strong></p>
<p>lantern(蓝灯)是近年来新起的一个工具,支持多平台,有收费与免费版,开源安全可靠.</p>
<p><strong>tor</strong></p>
<p>洋萄头是很老牌的一个工具,它的功能不是翻墙,是隐藏自已,就是所谓的<code>暗网</code>.<br>这里只讲述在Linux如何翻墙的,我是用一台树莓派做翻墙工具,24小时在线.</p>
<h4 id="Lantern-蓝灯"><a href="#Lantern-蓝灯" class="headerlink" title="Lantern(蓝灯)"></a>Lantern(蓝灯)</h4><p>直接按照官网教程先安装一些系统工具,git,go,make,docker,工具.这里以编译lantern 2.2.5为例.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># build lantern for raspberry pi</span></div><div class="line"><span class="comment">#</span></div><div class="line"></div><div class="line"><span class="built_in">set</span> -xe</div><div class="line"></div><div class="line"><span class="comment">#VERSION=$&#123;1:?version is empty&#125;</span></div><div class="line">VERSION=2.2.5</div><div class="line"></div><div class="line">git <span class="built_in">clone</span> https://github.com/getlantern/lantern.git</div><div class="line"><span class="built_in">cd</span> lantern</div><div class="line"></div><div class="line">VERSION=<span class="variable">$VERSION</span> HEADLESS=<span class="literal">true</span> make docker-linux-arm</div><div class="line">mv lantern_linux_arm lantern-<span class="variable">$VERSION</span>-armv7h</div><div class="line"></div><div class="line">sed -i <span class="string">'s/GOARM=7/GOARM=6/'</span> Makefile</div><div class="line"></div><div class="line">VERSION=<span class="variable">$VERSION</span> HEADLESS=<span class="literal">true</span> make docker-linux-arm</div><div class="line">mv lantern_linux_arm lantern-<span class="variable">$VERSION</span>-armv6h</div><div class="line"></div><div class="line">mkdir -p lantern/&#123;DEBIAN,lib/systemd/system,usr/bin&#125;/</div><div class="line">cp lantern-<span class="variable">$VERSION</span>-armv6h lantern/usr/bin/lantern</div><div class="line">cat &gt; lantern/DEBIAN/control &lt;&lt;_EOF_</div><div class="line">Package: lantern</div><div class="line">Version: <span class="variable">$VERSION</span>-1</div><div class="line">Maintainer: noreply@easypi.info</div><div class="line">Homepage: https://getlantern.org</div><div class="line">Architecture: armhf</div><div class="line">Priority: optional</div><div class="line">Section: net</div><div class="line">Description: Open Internet <span class="keyword">for</span> Everyone</div><div class="line">_EOF_</div><div class="line">cat &gt; lantern/lib/systemd/system/lantern.service &lt;&lt;_EOF_</div><div class="line">[Unit]</div><div class="line">Description=Open Internet <span class="keyword">for</span> Everyone</div><div class="line">Documentation=https://getlantern.org</div><div class="line">After=network.target</div><div class="line">[Service]</div><div class="line">ExecStart=/usr/bin/lantern -addr=0.0.0.0:8787</div><div class="line">StandardOutput=null</div><div class="line">StandardError=null</div><div class="line">Restart=always</div><div class="line">[Install]</div><div class="line">WantedBy=multi-user.target</div><div class="line">_EOF_</div><div class="line">dpkg -b lantern lantern_<span class="variable">$VERSION</span>-1_armhf.deb</div><div class="line"></div><div class="line">sudo mv lantern-<span class="variable">$VERSION</span>-armv[67]h lantern_<span class="variable">$VERSION</span>-1_armhf.deb ..</div><div class="line"><span class="built_in">cd</span> ..</div><div class="line">sudo chmod a+rw lantern-<span class="variable">$VERSION</span>-armv[67]h lantern_<span class="variable">$VERSION</span>-1_armhf.deb</div></pre></td></tr></table></figure>
<ul>
<li>最终在lantern目录会生成.deb文件.lantern-2.2.5-armv7h,lantern-2.2.5-armv6h是树莓派下可执行的文件.<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ file lantern-2.2.5-armv6h </div><div class="line">lantern-2.2.5-armv6h: ELF 32-bit LSB executable, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.3, stripped</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>把lantern 运行起来,在软件或浏览器中设置代理项指向树莓派生的IP地址,端口8787,就可以看google,facebook…..</li>
</ul>
<h3 id="TOR"><a href="#TOR" class="headerlink" title="TOR"></a>TOR</h3><ul>
<li><p>在各种Linux发行版的软件库里都有tor的安装直接安装就行了.这里的polipo,dnsmasq 不是必需的.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># apt-get install tor obfsproxy polipo dnsmasq</span></div></pre></td></tr></table></figure>
</li>
<li><p>为tor建一个普通用户,使用root用户会报错也不建议使用.在普通用户下的家目录里创建一个名为torrc的配置文件.内容如下.</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">SocksPort 9050 <span class="comment"># Default: Bind to localhost:9050 for local connections.</span></div><div class="line">SocksPolicy accept 127.0.0.1/32</div><div class="line">SocksPolicy reject *</div><div class="line">ClientOnly 1</div><div class="line">VirtualAddrNetwork 10.192.0.0/16</div><div class="line">DNSPort 9053</div><div class="line">DNSListenAddress  127.0.0.1</div><div class="line">AutomapHostsOnResolve 1</div><div class="line">AutomapHostsSuffixes .onion,.exit</div><div class="line">TransPort 9040</div><div class="line">Log notice file ~/tor/notices.log　　<span class="comment"># log日志途径</span></div><div class="line">RunAsDaemon 1</div><div class="line">ClientTransportPlugin  obfs2,obfs3 <span class="built_in">exec</span> /usr/bin/obfsproxy --managed</div><div class="line">UseBridges 1</div><div class="line">Bridge obfs3 192.36.31.133:42292 BD93F5439A71F8303BFDBF82066A11A6795596ED</div><div class="line">Bridge obfs3 194.132.208.198:28340 61258900CFD7BE034E938DC338C2F7197E2881AE</div><div class="line">Bridge obfs3 95.215.44.119:44527 1F1C600CE1E854E18123422EAD9267A5943815A4</div><div class="line">Bridge obfs3 163.172.161.87:34827 70C720468D057BBF9F59081506D660CE87CA4AD0</div><div class="line">Bridge obfs3 192.36.31.90:43445 78E6001D9B8B58122E8EAD0E9CF7E21D8595885C</div><div class="line">Bridge obfs3 23.252.105.31:3443 CDAE9FD7710761D1914182F62B1B47F2FBF1FDE1</div><div class="line">Bridge obfs3 192.36.31.245:42808 9D0091413CB15261A90A3256B752258CC509D5B8</div><div class="line">Bridge obfs3 37.218.246.101:35072 42F4F371DE858E634CEBB487759228838D791B66</div><div class="line">Bridge obfs3 84.39.34.97:27322 6FBE4B8B9E43D1114DEA26E82D6AC9EFEB407EB0</div><div class="line">Bridge obfs3 78.46.188.239:37356 5A2D2F4158D0453E00C7C176978D3F41D69C45DB</div><div class="line">Bridge obfs3 194.132.208.242:1287 988131F4E85BC3F07B78FCC8C5F8108440DBB9F1</div><div class="line">Bridge obfs3 194.132.208.107:9751 E2FCCB85809EE9B4747CADB86F8F3FD97389DB4C</div><div class="line">Bridge obfs3 52.207.232.222:45808 C32CF82A13BB9B6C746CE8E7D3CD873F876BAB65</div><div class="line">Bridge obfs3 192.36.31.144:54443 8C68078CCF04D2BD2CC110EF05336FF26020F8E5</div><div class="line">Bridge obfs3 95.247.9.235:45870 73DF00295D046C40B52F6CE7098EFD6799DCBA9E</div><div class="line">Bridge obfs3 192.241.211.52:41657 0BF680354EE20E1BBD385595C59B2824FFD6412D</div><div class="line">Bridge obfs3 45.79.190.81:38127 85DB43C92C5D83DAC3919D1EC751ECC5CE2A1240</div><div class="line">Bridge obfs3 205.185.120.120:35676 2D7DB306E8D7C750E18519DF362C5B54A36A1652</div></pre></td></tr></table></figure>
<p>上面的<code>obfs3</code>时效性不保,需要不定时去<strong><a href="https://bridges.torproject.org/bridges?transport=obfs3" target="_blank" rel="external">BrideDB</a></strong>更新.<br>现在可以运行一下tor,如果遇错按照错误提示解决.如果无错,就如下面运行在后台了.<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ tor <span class="_">-f</span> torcc</div><div class="line">Sep 12 23:46:18.865 [notice] Tor v0.2.7.6 running on Linux with Libevent 2.0.21-stable, OpenSSL 1.0.1t and Zlib 1.2.8.</div><div class="line">Sep 12 23:46:18.872 [notice] Tor can<span class="string">'t help you if you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warning</span></div><div class="line">Sep 12 23:46:18.881 [notice] Read configuration file "/home/user/torrc".</div><div class="line">Sep 12 23:46:19.156 [notice] Opening Socks listener on 127.0.0.1:9050</div><div class="line">Sep 12 23:46:19.171 [notice] Opening DNS listener on 127.0.0.1:9053</div><div class="line">Sep 12 23:46:19.183 [notice] Opening Transparent pf/netfilter listener on 127.0.0.1:9040</div></pre></td></tr></table></figure></p>
<ul>
<li>现在可以通过TOR查询DNS,国内的DNS对外网污染的很严重,都是张冠李戴的解析. 如果无错,下面显示解析正确的结果.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ tor-resolve www.google.com</div><div class="line">216.58.208.36</div></pre></td></tr></table></figure>
<h4 id="dnsmasq"><a href="#dnsmasq" class="headerlink" title="dnsmasq"></a>dnsmasq</h4><ul>
<li>通过dnsmasq 来为本机或者LAN局域网提供高效DNS缓存服务,这里的dnsmasq是通过TOR连接去查询,是未经ISP污染的结果.</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ cat /etc/dnsmasq.conf  | grep -v <span class="string">'^#'</span> | grep -v <span class="string">'^$'</span></div><div class="line">resolv-file=/etc/resolv.dnsmasq.conf</div><div class="line">no-resolv</div><div class="line">server=127.0.0.1<span class="comment">#9053</span></div><div class="line">listen-address=127.0.0.1,192.168.10.1</div><div class="line">no-dhcp-interface=eth0</div><div class="line">dhcp-range=192.168.10.100,192.168.10.150,12h</div><div class="line">dhcp-option=3,192.168.10.1</div><div class="line">dhcp-option=option:dns-server,192.168.10.1,8.8.8.8</div></pre></td></tr></table></figure>
<ul>
<li>本机的resolv.conf 配置<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ cat /etc/resolv.conf</div><div class="line"># Generated by resolvconf</div><div class="line">nameserver 127.0.0.1</div><div class="line">nameserver 8.8.8.8</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="polipo-代理服务"><a href="#polipo-代理服务" class="headerlink" title="polipo 代理服务"></a>polipo 代理服务</h4><p>polipo 可以代理TOR的连接,就是把其它程序的代理指本机IP,端口8123</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">socksParentProxy = localhost:9050</div><div class="line">proxyAddress = 0.0.0.0</div><div class="line">dnsNameServer = 127.0.0.1</div><div class="line"><span class="built_in">log</span>Syslog = <span class="literal">true</span></div><div class="line"><span class="built_in">log</span>File = /var/<span class="built_in">log</span>/polipo/polipo.log</div></pre></td></tr></table></figure>
<h4 id="本机的服务"><a href="#本机的服务" class="headerlink" title="本机的服务"></a>本机的服务</h4><p>运下上述的服务之后,查看本机树莓派生上的服务是否正常运行起来的,正常情况应包含如下字段:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ netstat -tnlp</div><div class="line">tcp        0      0 127.0.0.1:9050          0.0.0.0:*               LISTEN      1498/tor        </div><div class="line">tcp        0      0 0.0.0.0:8123            0.0.0.0:*               LISTEN      648/polipo      </div><div class="line">tcp        0      0 127.0.0.1:9040          0.0.0.0:*               LISTEN      1498/tor        </div><div class="line">tcp        0      0 127.0.0.1:8788          0.0.0.0:*               LISTEN      19220/lantern-2.2.5</div><div class="line">tcp        0      0 0.0.0.0:53              0.0.0.0:*               LISTEN      2053/dnsmasq    </div><div class="line">tcp        0      0 127.0.0.1:16823         0.0.0.0:*               LISTEN      19220/lantern-2.2.5</div><div class="line">tcp6       0      0 :::8787                 :::*                    LISTEN      19220/lantern-2.2.5</div></pre></td></tr></table></figure></p>
<hr>
<h3 id="自愿打赏支持"><a href="#自愿打赏支持" class="headerlink" title="自愿打赏支持"></a>自愿打赏支持</h3><p>&gt;</p>
<ul>
<li>你的打赏将会鼓励我写出更多的博客。  </li>
<li>支付宝二维码:<br>&gt;<br><img src="imgs/aex05246pdr9ik5wosogj3b.png" alt="pay"></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yjdwbj.github.io/2016/12/14/Linux-下翻墙指南/" data-id="ciwsmzquc0000uji527de33gn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RaspberryPi-Linux/">RaspberryPi,Linux</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/12/15/codeblocks与STM32的开发环境配置/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          codeblocks与STM32的开发环境配置
        
      </div>
    </a>
  
  
    <a href="/2016/11/09/Django-uWsgi-nginx-https-完全配置/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Django+uWsgi+nginx+https 完全配置</div>
    </a>
  
</nav>

  
</article>

</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <a href="/" class="logo">码农记事本</a>
      &copy; 2016 lcy<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollLoading.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>